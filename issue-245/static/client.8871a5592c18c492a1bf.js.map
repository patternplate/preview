{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///../search/index.js","webpack:///../search/lib/create-search.js","webpack:///../search/lib/query.js","webpack:///../search/lib/registry.js","webpack:///../search/lib/search.js","webpack:///../search/lib/term.js","webpack:///../websocket-client/index.js","webpack:///../websocket-client/lib/index.js","webpack:///./src/app/actions/activate-node.js","webpack:///./src/app/actions/apply-state.js","webpack:///./src/app/actions/arrow.js","webpack:///./src/app/actions/change-concern.js","webpack:///./src/app/actions/change-type.js","webpack:///./src/app/actions/close-all-the-things.js","webpack:///./src/app/actions/demo-content-resize.js","webpack:///./src/app/actions/dismiss-all-messages.js","webpack:///./src/app/actions/dismiss-message.js","webpack:///./src/app/actions/handle-dependent-actions.js","webpack:///./src/app/actions/index.js","webpack:///./src/app/actions/listen.js","webpack:///./src/app/actions/load-pattern-demo.js","webpack:///./src/app/actions/load-schema.js","webpack:///./src/app/actions/mark-block.js","webpack:///./src/app/actions/open-documentation.js","webpack:///./src/app/actions/open-fullscreen.js","webpack:///./src/app/actions/patch-location.js","webpack:///./src/app/actions/promise-thunk-action.js","webpack:///./src/app/actions/reload.js","webpack:///./src/app/actions/resize-demo.js","webpack:///./src/app/actions/scroll-demo.js","webpack:///./src/app/actions/scroll-to.js","webpack:///./src/app/actions/search-preview.js","webpack:///./src/app/actions/search.js","webpack:///./src/app/actions/theme-loaded.js","webpack:///./src/app/actions/toggle-code.js","webpack:///./src/app/actions/toggle-components-enabled.js","webpack:///./src/app/actions/toggle-console.js","webpack:///./src/app/actions/toggle-dependencies.js","webpack:///./src/app/actions/toggle-dependents.js","webpack:///./src/app/actions/toggle-doc.js","webpack:///./src/app/actions/toggle-hide.js","webpack:///./src/app/actions/toggle-info.js","webpack:///./src/app/actions/toggle-keyboard-shortcuts.js","webpack:///./src/app/actions/toggle-manifest.js","webpack:///./src/app/actions/toggle-navigation.js","webpack:///./src/app/actions/toggle-network.js","webpack:///./src/app/actions/toggle-opacity.js","webpack:///./src/app/actions/toggle-rulers.js","webpack:///./src/app/actions/toggle-search.js","webpack:///./src/app/actions/toggle-theme.js","webpack:///./src/app/actions/toggle.js","webpack:///./src/app/actions/window-resize.js","webpack:///./src/app/behaviours.js","webpack:///./src/app/client.js","webpack:///./src/app/components/common/toggle-button.js","webpack:///./src/app/components/documentation.js","webpack:///./src/app/components/favicon.js","webpack:///./src/app/components/indicator.js","webpack:///./src/app/components/message.js","webpack:///./src/app/components/outside.js","webpack:///./src/app/components/pattern/index.js","webpack:///./src/app/components/pattern/pattern-demo.js","webpack:///./src/app/components/pattern/pattern-sheet.js","webpack:///./src/app/components/search-field.js","webpack:///./src/app/components/search.js","webpack:///./src/app/components/toggle-navigation.js","webpack:///./src/app/components/toggle-opacity.js","webpack:///./src/app/components/toggle-search.js","webpack:///./src/app/components/trigger-fullscreen.js","webpack:///./src/app/connectors/with-active-for-pattern.js","webpack:///./src/app/connectors/with-id.js","webpack:///./src/app/connectors/with-toggle-states.js","webpack:///./src/app/connectors/with-toggle.js","webpack:///./src/app/containers/application.js","webpack:///./src/app/containers/documentation.js","webpack:///./src/app/containers/favicon.js","webpack:///./src/app/containers/indicator.js","webpack:///./src/app/containers/link.js","webpack:///./src/app/containers/logo.js","webpack:///./src/app/containers/markdown.js","webpack:///./src/app/containers/message.js","webpack:///./src/app/containers/navigation.js","webpack:///./src/app/containers/not-found.js","webpack:///./src/app/containers/pass-through.js","webpack:///./src/app/containers/pattern.js","webpack:///./src/app/containers/search.js","webpack:///./src/app/containers/toggle-navigation.js","webpack:///./src/app/containers/toggle-opacity.js","webpack:///./src/app/containers/toggle-search.js","webpack:///./src/app/containers/trigger-fullscreen.js","webpack:///./src/app/reducers/active-block.js","webpack:///./src/app/reducers/active-node.js","webpack:///./src/app/reducers/base.js","webpack:///./src/app/reducers/code-enabled.js","webpack:///./src/app/reducers/components-enabled.js","webpack:///./src/app/reducers/config.js","webpack:///./src/app/reducers/connection.js","webpack:///./src/app/reducers/demo.js","webpack:///./src/app/reducers/dependencies-enabled.js","webpack:///./src/app/reducers/dependents-enabled.js","webpack:///./src/app/reducers/depth.js","webpack:///./src/app/reducers/doc-enabled.js","webpack:///./src/app/reducers/fetching.js","webpack:///./src/app/reducers/hide-enabled.js","webpack:///./src/app/reducers/id.js","webpack:///./src/app/reducers/index.js","webpack:///./src/app/reducers/info-enabled.js","webpack:///./src/app/reducers/is-static.js","webpack:///./src/app/reducers/manifest-enabled.js","webpack:///./src/app/reducers/messages.js","webpack:///./src/app/reducers/navigation-enabled.js","webpack:///./src/app/reducers/network-enabled.js","webpack:///./src/app/reducers/opacity.js","webpack:///./src/app/reducers/schema.js","webpack:///./src/app/reducers/search-enabled.js","webpack:///./src/app/reducers/search-preview.js","webpack:///./src/app/reducers/search-value.js","webpack:///./src/app/reducers/search.js","webpack:///./src/app/reducers/shortcuts.js","webpack:///./src/app/reducers/theme.js","webpack:///./src/app/reducers/toggle.js","webpack:///./src/app/reducers/window.js","webpack:///./src/app/routes.js","webpack:///./src/app/selectors/demo.js","webpack:///./src/app/selectors/docs.js","webpack:///./src/app/selectors/found.js","webpack:///./src/app/selectors/item.js","webpack:///./src/app/selectors/navigation.js","webpack:///./src/app/selectors/pool.js","webpack:///./src/app/selectors/relation.js","webpack:///./src/app/selectors/tree.js","webpack:///./src/app/shortcuts.js","webpack:///./src/app/store.js","webpack:///./src/app/utils/fetch.js","webpack:///./src/app/utils/find.js","webpack:///./src/app/utils/get-id-by-pathname.js","webpack:///./src/app/utils/shortcut.js","webpack:///./src/app/utils/url-query.js","webpack:///./src/client.js"],"names":["module","exports","require","Query","Registry","Search","Term","createSearch","items","search","create","registry","performSearch","queryString","query","parse","perform","term","termString","valid","raw","flatten","intersection","q","values","parsed","utils","binaryTreeToQueryJson","type","err","predicate","map","value","TypeError","JSON","stringify","semver","FLAGS","deprecated","alpha","beta","rc","stable","matcher","getMatcher","field","filter","item","manifest","negated","i","id","options","depends","matchDepends","has","matchHas","provides","matchProvides","flag","matchFlag","tags","matchTags","version","matchVersion","is","matchIs","description","index","dependencies","dependents","length","Boolean","rawManifest","displayName","contentType","contents","startsWith","some","d","includes","lower","equals","greater","tag","modified","satisfies","operators","Fuse","keys","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_nonIterableRest","_arr","_n","_d","_e","undefined","_i","Symbol","iterator","_s","next","done","push","Array","isArray","OPERATORS","found","match","_found","negator","modifier","equality","join","_require","EventEmitter","WebSocketClient","src","reconnect","interval","opened","ended","ee","exec","args","listeners","forEach","l","open","instance","global","WebSocket","addEventListener","close","removeEventListener","loop","setInterval","handler","on","activateNode","dispatch","key","property","applyState","payload","arrow","OFFSETS","up","down","default","getState","state","searchEnabled","navigationEnabled","offset","pool","findIndex","go","href","changeConcern","concern","location","routing","locationBeforeTransitions","source","previous","pathname","ext","extname","hasDemo","pattern","files","file","slice","format","dirname","changeType","input","equal","closeAllTheThings","issue","lightbox","width","height","handleDependentActions","partialReduce","deps","handlers","reduce","entry","name","fn","action","actionHandlers","ok","Object","missing","dependency","reducer","defaultValue","window","envelope","data","indexOf","message","safeParse","itemType","isStatic","resolve","base","url","ws","host","onOpen","onClose","onError","onMessage","force","getSrc","uri","headers","Accept","response","text","body","status","error","demo","selectSrc","_","__","prefix","json","charAt","openDocumentation","openFullscreen","patchLocation","hasOwnProperty","ident","asyncIdent","createPromiseThunkAction","rawCreator","creator","delayedAction","successAction","startAction","throwsAction","delayedTimer","setTimeout","console","clearTimeout","Promise","result","__name","handlePromiseThunkAction","rawName","start","delayed","success","throws","reload","actions","all","resizeDemo","x","y","scrollDemo","frame","run","requestAnimationFrame","scrollDemoX","scrollDemoY","scrollTo","NOOP","to","document","target","getTarget","parent","scrollTop","offsetParent","offsetTop","getElementById","searchPreview","MOVEMENTS","delta","persist","toggleSearch","sync","focus","el","querySelector","activeElement","range","setSelectionRange","toggleTheme","forced","theme","toggle","toUpperCase","mountable","Component","props","onMount","rest","skippable","prop","store","history","router","ToggleButton","title","shortcut","toString","active","className","children","enabled","StandIn","div","Documentation","nextProps","changed","requestScroll","ref","doc","StyledDocumentation","THEMES","SVG_FAVICON_SUPPORT","FavIcon","png","getSource","then","setState","pngHref","catch","svgHref","btoa","rel","colors","color","patternplate","fill","getFill","purge","purged","dark","Indicator","onClick","isValid","getLabel","StyledDot","getGlow","StyledIndicator","StyledLabel","getOut","getPulse","out","pulse","Message","details","summary","StyledMessage","StyledMessageContent","pre","StyledDetails","StyledSummary","ClickOutside","handle","bind","getContainer","container","e","contains","onClickOutside","Buffer","from","VISIBILITY","checkers","CROSSES","PAD","padded","OFF","OFFSET","StyledPattern","StyledPatternFolder","StyledPatternDoc","StyledPatternDemo","StyledPatternLoader","hidden","PatternContainer","Pattern","srcdoc","docs","screenshot","opacity","getPrefix","loading","enter","exit","updated","StyledDemo","iframe","PatternDemo","processor","use","mapProps","PatternSheet","processSync","StyledSearchTrigger","span","StyledLink","SearchTrigger","selectContents","selectDescription","icon","selectIcon","selectType","selectName","selectFlag","selectTags","selectVersion","TOOLBAR_HEIGHT","StyledName","StyledVersion","StyledDescription","recess","StyledPatternSheet","border","background","ORIENTATION","direction","orient","StyledPatternSheetContainer","StyledControlsArea","StyledControlsBox","StyledControlsItem","StyledTagList","StyledBoxLine","StyledMarkdownBox","SearchField","handleChange","handleKeyDown","handleStop","onStop","trailing","timer","onChange","hasValue","atEnd","selectionStart","which","altKey","ctrlKey","preventDefault","stopPropagation","onClear","onUp","suggestion","onComplete","onDown","autoFocus","onBlur","onFocus","placeholder","mark","defaultProps","blur","InfoPane","SearchComponent","SearchResult","SearchResultList","SearchResultHeading","SearchResultPreview","SearchFieldSlot","SearchClose","Close","SearchPassThroughSlot","PassThroughSlot","activeItem","onActivate","handleScrollRequest","demoDependencies","demoDependents","handleSubmit","handleUp","handleDown","handleActivate","getListRef","getSearchResult","list","getBoundingClientRect","bottom","top","getAttribute","components","available","onSubmit","onNavigate","withComponents","withDocs","inline","shortcuts","legend","getSearchResultPreview","Hamburger","StyledToggleButton","Opacity","StyledIcon","SearchButton","Fullscreen","withActiveForPattern","withId","withToggleStates","dependenciesEnabled","dependentsEnabled","manifestEnabled","s","withToggle","find","selectThemes","config","ui","selectLines","messages","split","selectMessage","lines","trim","selectHasMessage","schema","networkEnabled","logo","renderedLogo","themes","hasMessage","jsWarningEnabled","browserWarningEnabled","mapDispatch","onLoad","listen","onResize","windowResize","injections","Application","style","overflow","meta","visible","WIDTH","NAVIGATION_WIDTH","StyledWarningLabel","StyledBrowserWarning","warning","StyledBrowserContainer","StyledBrowserContent","StyledBrowserText","StyledBrowserContainerClose","StyledApplication","StyledNavigationBox","StyledMessageBox","StyledContent","StyledContentContainer","WITH_SCREENSHOT_OFFSET","factor","WITH_NAVIGATION_OFFSET","SUM","acc","StyledSearchBox","StyledSearchFrame","StyledFloatingBox","StyledInfoPane","StyledPane","NavigationControl","backgroundSecondary","content","mapState","selectNotFound","selectNoDocs","selectDocItem","first","selectDoc","noDocs","notFound","selectDisplayName","favicon","selectStatus","connection","RawLink","own","assign","getHref","ownProps","external","currentTarget","hash","path","context","b","norm","p","selectWidgetSrc","staticBase","widgetSrc","widgetState","selectDetails","selectActive","NavigationHeader","NavigationToolbar","componentsEnabled","navigation","onItemClick","onLabelClick","PassThrough","DEFAULT_PATTERN_CONTENTS","NOT_FOUND","selectDocs","fetching","selectContentType","loadPatternDemo","selectActiveItem","selectPatterns","selectLegend","selectSuggestion","searchValue","toggleNavigation","OpacityToggle","toggleOpacity","SkippableFullscreen","markBlockHandler","locationChangeHandler","toggleCode","toggleComponentsEnabled","copy","render","sanitize","renderedFavicon","LISTEN_HEARTBEAT","FETCHING","ERROR_HEARTBEAT","DEFAULT","Date","now","toggleDependencies","onLocationChange","getDepth","fragments","fragmentIndex","known","toggleDoc","toggleHide","getDependencies","depth","hideEnabled","startBase","toggleInfo","toggleManifest","toggleNetwork","onPreviewLocationChange","Number","isNaN","Math","max","onPerformSeach","PERFORM_SEARCH","onSetSearchLocationChange","onSetSearch","onPerformSearch","SET_SEARCH","onSearchLocationChange","onWindowResize","sd","tree","hide","selectFlatPool","nav","concat","selectSubSearch","flatPool","matches","selectDocsTree","selectFirstItem","selectQueries","selectQueried","queries","r","queried","child","flat","FIELDS","selectSearch","selectMatches","selectParsedValue","selectLastQuery","last","cand","selectFields","f","selectFieldHit","selectParsedQuery","selectOps","hit","op","o","selectOpsHit","ops","selectFound","sorted","selectPatternPool","selectOptions","patterns","versions","sort","a","gt","v","flags","localeCompare","selectOptionsHit","parsedValue","fields","fieldHit","opsHit","optionsHit","m","k","lmatch","preview","min","selectVirtual","selectItem","selectFilter","relation","selectDependencies","selectDependents","selectManifest","selectId","enriched","selectPool","initial","createRelationSelector","WEIGHTS","folder","enrich","order","weight","comp","childid","warnings","createShortcuts","toggleConsole","character","info","toggleShortcuts","toggleKeyboardShortcuts","toggleRulers","reloadTime","modifiers","right","left","configureStore","hydrateable","enhance","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","middlewares","middleware","fetch","defaultHeaders","accept","credentials","userHeaders","reg","RegExp","frags","replace","every","getIdByPathname","posix","relative","CODES","esc","space","c","h","n","t","Shortcut","code","onKeyPress","keyCode","prevent","token","not","shove","extension","before","after","basename","urlPath","ARSON","platform","merge","main","slot","vault","getData","innerHTML","setAttribute","decodeURIComponent","textContent","getStateData","getPlatformData","getWindowData","clientRuntimeName","clientRuntimeVersion","clientOsName","os","clientOsVersion","innerWidth","innerHeight"],"mappings":"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","file":"client.8871a5592c18c492a1bf.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t\"client\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([\"./src/client.js\",\"vendors~client\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","module.exports = require(\"./lib/create-search\");\n","\"use strict\";\n\nconst Query = require(\"./query\");\n\nconst Registry = require(\"./registry\");\n\nconst Search = require(\"./search\");\n\nconst Term = require(\"./term\");\n\nmodule.exports = {\n  createSearch,\n  Query,\n  Term\n};\n\nfunction createSearch(items) {\n  const search = Search.create(items);\n  const registry = Registry.create(items);\n  return function performSearch(queryString) {\n    const query = Query.parse(queryString);\n    return Query.perform(query, termString => {\n      const term = Term.parse(termString);\n\n      if (term.valid) {\n        return registry.search(term);\n      }\n\n      return search.search(term.raw);\n    });\n  };\n}\n//# sourceMappingURL=create-search.js.map","\"use strict\";\n\nconst flatten = require(\"lodash.flatten\");\n\nconst intersection = require(\"lodash.intersection\");\n\nconst q = require(\"logic-query-parser\");\n\nmodule.exports = {\n  parse,\n  perform\n};\n\nfunction parse(queryString) {\n  const values = typeof queryString === \"string\" ? [queryString] : [];\n\n  try {\n    const parsed = q.parse(queryString);\n    const query = q.utils.binaryTreeToQueryJson(parsed);\n\n    if (query.type) {\n      return query;\n    }\n\n    return {\n      type: \"and\",\n      values\n    };\n  } catch (err) {\n    return {\n      type: \"and\",\n      values\n    };\n  }\n}\n\nfunction perform(query, predicate) {\n  if (typeof query === \"string\") {\n    return predicate(query);\n  }\n\n  const items = () => query.values.map(value => perform(value, predicate));\n\n  const value = typeof query.value === \"string\" ? query.value : \"\";\n\n  switch (query.type) {\n    case \"and\":\n      {\n        return intersection(...items());\n      }\n\n    case \"or\":\n      {\n        return flatten(...items());\n      }\n\n    case \"string\":\n      {\n        return predicate(value);\n      }\n\n    default:\n      {\n        throw new TypeError(`@patternplate/search.perform: Unknown query: ${JSON.stringify(query)}`);\n      }\n  }\n}\n//# sourceMappingURL=query.js.map","\"use strict\";\n\nconst semver = require(\"semver\");\n\nmodule.exports = {\n  create\n};\nconst FLAGS = {\n  deprecated: 0,\n  alpha: 0,\n  beta: 1,\n  rc: 2,\n  stable: 3\n}; // TODO: create an efficient search data structure\n\nfunction create(items) {\n  return {\n    search(term) {\n      const matcher = getMatcher(term.field, term.value, term);\n      return items.filter(item => typeof item.manifest === \"object\").filter(item => term.negated ? !matcher(item) : matcher(item)).map(i => i.id);\n    }\n\n  };\n}\n\nfunction getMatcher(field, value, options) {\n  const depends = matchDepends(value, options);\n  const has = matchHas(value, options);\n  const provides = matchProvides(value, options);\n  const flag = matchFlag(value, options);\n  const tags = matchTags(value, options);\n  const version = matchVersion(value, options);\n  const is = matchIs(value);\n  return item => {\n    switch (field) {\n      case \"depends\":\n        return depends(item);\n\n      case \"description\":\n        return description(item);\n\n      case \"flag\":\n        return flag(item);\n\n      case \"has\":\n        return has(item);\n\n      case \"is\":\n        return is(item);\n\n      case \"provides\":\n        return provides(item);\n\n      case \"tag\":\n      case \"tags\":\n        return tags(item);\n\n      case \"version\":\n        return version(item);\n\n      case \"flag\":\n        return flag(item);\n\n      default:\n        return item[field] === value || item.manifest[field] === value;\n    }\n  };\n}\n\nconst manifest = item => item.manifest;\n\nconst flag = item => manifest(item).flag;\n\nconst index = item => FLAGS[flag(item)] || 0;\n\nconst version = item => manifest(item).version;\n\nconst tags = item => manifest(item).tags || [];\n\nconst depends = item => (item.dependencies || []).filter(i => typeof i === \"string\");\n\nconst dependents = item => (item.dependents || []).filter(i => typeof i === \"string\");\n\nfunction matchHas(value) {\n  return item => {\n    switch (value) {\n      case \"dependencies\":\n        return (item.dependencies || []).length > 0;\n\n      case \"dependents\":\n        return (item.dependents || []).length > 0;\n\n      case \"description\":\n        return Boolean(item.manifest.description);\n\n      case \"displayName\":\n        return Boolean((item.rawManifest || {}).displayName);\n\n      case \"doc\":\n      case \"docs\":\n        return item.contentType === \"pattern\" && Boolean(item.contents);\n\n      case \"flag\":\n        return Boolean((item.rawManifest || {}).flag);\n\n      case \"tag\":\n      case \"tags\":\n        return (item.manifest.tags || []).length > 0;\n\n      case \"version\":\n        return Boolean((item.rawManifest || {}).version);\n\n      default:\n        return false;\n    }\n  };\n}\n\nfunction matchIs(value) {\n  return item => item.contentType === value;\n}\n\nfunction matchDepends(value, options) {\n  if (options.startsWith) {\n    return item => depends(item).length > 0 && depends(item).some(d => d.startsWith(value));\n  }\n\n  if (options.includes) {\n    return item => depends(item).length > 0 && depends(item).some(d => d.includes(value));\n  }\n\n  return item => depends(item).includes(value);\n}\n\nfunction matchFlag(value, options) {\n  const i = FLAGS[value] || 0;\n\n  if (options.lower) {\n    return item => options.equals ? index(item) <= i : index(item) < i;\n  }\n\n  if (options.greater) {\n    return item => options.equals ? index(item) >= i : index(item) > i;\n  }\n\n  if (options.startsWith) {\n    return item => flag(item).startsWith(value);\n  }\n\n  if (options.includes) {\n    return item => flag(item).includes(value);\n  }\n\n  return item => flag(item) === value;\n}\n\nfunction matchProvides(value, options) {\n  if (options.startsWith) {\n    return item => dependents(item).length > 0 && dependents(item).some(d => d.startsWith(value));\n  }\n\n  if (options.includes) {\n    return item => dependents(item).length > 0 && dependents(item).some(d => d.includes(value));\n  }\n\n  return item => dependents(item).includes(value);\n}\n\nfunction matchTags(value, options) {\n  if (options.startsWith) {\n    return item => tags(item).length > 0 && tags(item).some(tag => tag.startsWith(value));\n  }\n\n  if (options.includes) {\n    return item => tags(item).length > 0 && tags(item).some(tag => tag.includes(value));\n  }\n\n  return item => tags(item).includes(value);\n}\n\nfunction matchVersion(value, options) {\n  const modified = options.lower || options.greater || options.startsWith || options.includes;\n\n  const valid = item => semver.valid(version(item));\n\n  if (modified) {\n    return item => valid(item) ? semver.satisfies(version(item), `${options.operators}${options.value}`) : false;\n  }\n\n  return item => valid(item) ? semver.satisfies(version(item), options.value) : false;\n}\n//# sourceMappingURL=registry.js.map","\"use strict\";\n\nconst Fuse = require(\"fuse.js\");\n\nmodule.exports = {\n  create\n};\n\nfunction create(items) {\n  return new Fuse(items, {\n    id: \"id\",\n    keys: [\"id\", \"contents\", \"manifest.displayName\", \"manifest.description\", \"manifest.name\", \"manifest.version\", \"manifest.tags\", \"manifest.flag\"]\n  });\n}\n//# sourceMappingURL=search.js.map","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = {\n  parse\n};\nconst OPERATORS = /([^!><^~\\n=]+)?(?:(!)?(>|<|\\^|~)?(=)?)([^!><^~\\n=]+)?/;\n\nfunction parse(termString) {\n  const found = termString.match(OPERATORS) || [];\n\n  const _found = _slicedToArray(found, 6),\n        raw = _found[0],\n        field = _found[1],\n        negator = _found[2],\n        modifier = _found[3],\n        equality = _found[4],\n        value = _found[5];\n\n  return {\n    field,\n    value,\n    raw,\n    operators: [modifier, equality].join(\"\"),\n    negated: negator === \"!\",\n    greater: modifier === \">\",\n    lower: modifier === \"<\",\n    startsWith: equality === \"=\" && modifier === \"^\",\n    includes: equality === \"=\" && modifier === \"~\",\n    equals: equality === \"=\",\n    valid: Boolean(field && value && (typeof modifier === \"string\" || typeof equality === \"string\"))\n  };\n}\n//# sourceMappingURL=term.js.map","module.exports = require(\"./lib\");\n","\"use strict\";\n\nconst _require = require(\"events\"),\n      EventEmitter = _require.EventEmitter;\n\nmodule.exports.WebSocketClient = class WebSocketClient {\n  constructor({\n    src,\n    reconnect,\n    interval\n  }) {\n    this.src = src;\n    this.reconnect = reconnect;\n    this.interval = interval;\n    this.opened = false;\n    this.ended = false;\n    this.ee = new EventEmitter();\n  }\n\n  open() {\n    const exec = (type, args) => this.ee.listeners(type).forEach(l => l(...args));\n\n    const open = () => {\n      this.instance = new global.WebSocket(this.src); // Make Chrome behave and close the websocket connection\n      // before unloading the browsing context. Ref: https://github.com/websockets/ws/issues/1256\n\n      global.addEventListener(\"beforeunload\", this.close);\n      this.instance.addEventListener(\"open\", (...args) => {\n        this.opened = true;\n        exec(\"open\", args);\n      });\n      this.instance.addEventListener(\"close\", (...args) => {\n        global.removeEventListener(\"beforeunload\", this.close);\n        this.opened = false;\n        exec(\"close\", args);\n      });\n      this.instance.addEventListener(\"error\", (...args) => {\n        global.removeEventListener(\"beforeunload\", this.close);\n        this.opened = false;\n        exec(\"error\", args);\n      });\n      this.instance.addEventListener(\"message\", (...args) => {\n        exec(\"message\", args);\n      });\n    };\n\n    open();\n\n    if (this.reconnect) {\n      this.loop = setInterval(() => {\n        if (this.ended || this.opened) {\n          return;\n        }\n\n        open();\n      }, this.interval);\n    }\n  }\n\n  close() {\n    this.ended = true;\n\n    if (this.opened) {\n      this.instance.close();\n    }\n  }\n\n  onOpen(handler) {\n    this.ee.on(\"open\", handler);\n  }\n\n  onClose(handler) {\n    this.ee.on(\"close\", handler);\n    this.instance.addEventListener(\"close\", handler);\n  }\n\n  onError(handler) {\n    this.ee.on(\"error\", handler);\n    this.instance.addEventListener(\"error\", handler);\n  }\n\n  onMessage(handler) {\n    this.ee.on(\"message\", handler);\n    this.instance.addEventListener(\"message\", handler);\n  }\n\n};\n//# sourceMappingURL=index.js.map","import { patchLocation } from \"./\";\n\nexport default activateNode;\nexport const type = \"ACTIVATE_NODE\";\n\nfunction activateNode(id) {\n  return dispatch => {\n    dispatch(\n      patchLocation({\n        query: {\n          \"active-node\": id\n        }\n      })\n    );\n  };\n}\n\nactivateNode.key = \"\";\nactivateNode.property = \"\";\nactivateNode.type = type;\n","export default applyState;\nexport const type = \"@@APPLY_STATE\";\n\nfunction applyState(payload) {\n  return {\n    type,\n    payload\n  };\n}\n","import { push } from \"react-router-redux\";\nimport toggleNavigation from \"./toggle-navigation\";\nimport {flat as selectPool} from \"../selectors/pool\";\n\nexport default arrow;\nexport const type = \"ARROW\";\n\nconst OFFSETS = {\n  up: -1,\n  down: 1,\n  default: 0\n};\n\nfunction arrow(payload) {\n  return (dispatch, getState) => {\n    const state = getState();\n\n    // Is handled locally\n    if (state.searchEnabled) {\n      return;\n    }\n\n    switch (payload) {\n      case \"right\": {\n        if (state.navigationEnabled) {\n          return dispatch(toggleNavigation());\n        }\n        return;\n      }\n      case \"left\": {\n        if (!state.navigationEnabled) {\n          return dispatch(toggleNavigation());\n        }\n        return;\n      }\n      case \"up\":\n      case \"down\":\n      default: {\n        if (!state.navigationEnabled) {\n          return;\n        }\n\n        const offset = payload in OFFSETS ? OFFSETS[payload] : OFFSETS.default;\n        const pool = selectPool(state);\n        const index = pool.findIndex((item) => `${item.contentType}/${item.id}` === state.id || state.id === '/' && item.id === '/root');\n        const next = pool[index + offset];\n        if (next) {\n          go(dispatch)(next.href);\n        }\n      }\n    }\n  };\n}\n\nfunction go(dispatch) {\n  return next => dispatch(push(next));\n}\n\n","import path from \"path\";\nimport urlQuery from \"../utils/url-query\";\nimport { patchLocation } from \"./\";\n\nexport default changeConcern;\nexport const type = \"CHANGE_CONCERN\";\n\nfunction changeConcern(concern) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const location = state.routing.locationBeforeTransitions;\n    const parsed = urlQuery.parse(location.query.source);\n    const previous = parsed.pathname;\n    const ext = path.extname(previous);\n\n    const hasDemo = state.pattern.files.some(file => {\n      return file.concern === \"demo\" && file.type === ext.slice(1);\n    });\n\n    const type = concern === \"index\" && hasDemo ? \"source\" : parsed.query.type;\n\n    const source = urlQuery.format({\n      pathname: `${path.dirname(previous)}/${concern}${ext}`,\n      query: {\n        ...parsed.query,\n        type\n      }\n    });\n\n    dispatch(\n      patchLocation({\n        query: {\n          source\n        }\n      })\n    );\n  };\n}\n\nchangeConcern.type = type;\n","import assert from \"assert\";\nimport { includes, merge } from \"lodash\";\nimport urlQuery from \"../utils/url-query\";\nimport { patchLocation } from \"./\";\n\nexport default changeType;\nexport const type = \"CHANGE_TYPE\";\n\nfunction changeType(input) {\n  assert.equal(\n    typeof input,\n    \"string\",\n    \"input for changeType action must be of type string\"\n  );\n\n  return (dispatch, getState) => {\n    const location = getState().routing.locationBeforeTransitions;\n    const parsed = urlQuery.parse(location.query.source || \"\");\n    const type = includes([\"source\", \"transformed\"], input) ? input : \"source\";\n    const query = { type };\n    const source = urlQuery.format(merge({}, parsed, { query }));\n    dispatch(patchLocation({ query: { source } }));\n  };\n}\n\nchangeType.type = type;\n","import { patchLocation, dismissAllMessages } from \"./\";\n\nexport default closeAllTheThings;\nexport const type = \"CLOSE_ALL_THE_THINGS\";\n\nfunction closeAllTheThings() {\n  return dispatch => {\n    dispatch(dismissAllMessages());\n    dispatch(\n      patchLocation({\n        query: {\n          issue: null,\n          lightbox: null,\n          \"menu-enabled\": null,\n          \"network-enabled\": null,\n          \"search-enabled\": null,\n          source: null,\n          \"source-expanded\": null\n        }\n      })\n    );\n  };\n}\n\ncloseAllTheThings.type = type;\n","import { createAction } from \"redux-actions\";\n\nexport default createAction(\"DEMO_CONTENT_RESIZE\", ({ width, height }) => ({\n  width,\n  height\n}));\n","import { createAction } from \"redux-actions\";\n\nexport default createAction(\"DISMISS_ALL_MESSAGES\");\n","import { createAction } from \"redux-actions\";\n\nexport default createAction(\"DISMISS_MESSAGE\");\n","import assert from \"assert\";\nimport { handleActions } from \"redux-actions\";\nimport { entries, pick } from \"lodash\";\n\nexport default handleDependentActions;\n\nfunction partialReduce(deps) {\n  return handlers => {\n    return entries(handlers).reduce((registry, entry) => {\n      const [name, fn] = entry;\n      registry[name] = (state, action) => {\n        return fn(state, action, deps);\n      };\n      return registry;\n    }, {});\n  };\n}\n\nfunction handleDependentActions(actionHandlers, options) {\n  assert.ok(\n    Array.isArray(options.dependencies),\n    \"options.dependencies must be an array\"\n  );\n\n  const handler = (...args) => {\n    const [, , dependencies = {}] = args;\n\n    if (Object.keys(dependencies).length > 0) {\n      const missing = options.dependencies.filter(\n        dependency => !(dependency in dependencies)\n      );\n      assert.ok(\n        missing.length === 0,\n        `dependencies for ${Object.keys(actionHandlers).join(\n          \", \"\n        )} must be present in state. missing: ${missing.join(\n          \",\"\n        )}. available: ${Object.keys(dependencies)}`\n      );\n    }\n\n    const deps = pick(dependencies, options.dependencies);\n    const handlers = partialReduce(deps)(actionHandlers);\n    const reducer = handleActions(handlers, options.defaultValue);\n    return reducer(...args);\n  };\n  handler.dependencies = options.dependencies;\n  return handler;\n}\n","import activateNode from \"./activate-node\";\nimport applyState from \"./apply-state\";\nimport arrow from \"./arrow\";\nimport changeConcern from \"./change-concern\";\nimport changeType from \"./change-type\";\nimport closeAllTheThings from \"./close-all-the-things\";\nimport demoContentResize from \"./demo-content-resize\";\nimport dismissAllMessages from \"./dismiss-all-messages\";\nimport dismissMessage from \"./dismiss-message\";\nimport listen from \"./listen\";\nimport loadPatternDemo from \"./load-pattern-demo\";\nimport loadSchema from \"./load-schema\";\nimport openDocumentation from \"./open-documentation\";\nimport openFullscreen from \"./open-fullscreen\";\nimport patchLocation from \"./patch-location\";\nimport reload from \"./reload\";\nimport resizeDemo from \"./resize-demo\";\nimport scrollDemo from \"./scroll-demo\";\nimport scrollTo from \"./scroll-to\";\nimport search from \"./search\";\nimport searchPreview from \"./search-preview\";\nimport themeLoaded from \"./theme-loaded\";\nimport toggleCode from \"./toggle-code\";\nimport toggleConsole from \"./toggle-console\";\nimport toggleDependencies from \"./toggle-dependencies\";\nimport toggleDependents from \"./toggle-dependents\";\nimport toggleDoc from \"./toggle-doc\";\nimport toggleHide from \"./toggle-hide\";\nimport toggleInfo from \"./toggle-info\";\nimport toggleKeyboardShortcuts from \"./toggle-keyboard-shortcuts\";\nimport toggleManifest from \"./toggle-manifest\";\nimport toggleNavigation from \"./toggle-navigation\";\nimport toggleNetwork from \"./toggle-network\";\nimport toggleOpacity from \"./toggle-opacity\";\nimport toggleComponentsEnabled from \"./toggle-components-enabled\";\nimport toggleRulers from \"./toggle-rulers\";\nimport toggleSearch from \"./toggle-search\";\nimport toggleTheme from \"./toggle-theme\";\nimport windowResize from \"./window-resize\";\n\nexport {\n  activateNode,\n  applyState,\n  arrow,\n  changeConcern,\n  changeType,\n  closeAllTheThings,\n  demoContentResize,\n  dismissAllMessages,\n  dismissMessage,\n  listen,\n  loadPatternDemo,\n  loadSchema,\n  openDocumentation,\n  openFullscreen,\n  patchLocation,\n  reload,\n  resizeDemo,\n  scrollDemo,\n  scrollTo,\n  search,\n  searchPreview,\n  themeLoaded,\n  toggleCode,\n  toggleConsole,\n  toggleDependencies,\n  toggleDependents,\n  toggleDoc,\n  toggleHide,\n  toggleInfo,\n  toggleKeyboardShortcuts,\n  toggleManifest,\n  toggleNavigation,\n  toggleNetwork,\n  toggleOpacity,\n  toggleComponentsEnabled,\n  toggleRulers,\n  toggleSearch,\n  toggleTheme,\n  windowResize\n};\n","import url from \"url\";\nimport { WebSocketClient } from \"@patternplate/websocket-client\";\nimport ARSON from \"arson\";\nimport { createPromiseThunkAction } from \"./promise-thunk-action\";\nimport loadPatternDemo from \"./load-pattern-demo\";\nimport loadSchema from \"./load-schema\";\nimport { flat as selectPool } from \"../selectors/pool\";\nimport { patchLocation } from \"./\";\n\nexport default createPromiseThunkAction(\n  \"LISTEN\",\n  (payload, dispatch, getState) => {\n    const { WebSocket } = global;\n\n    if (!WebSocket) {\n      return;\n    }\n\n    const state = getState();\n\n    window.addEventListener(\"message\", envelope => {\n      if (typeof envelope.data !== \"string\") {\n        return;\n      }\n\n      if (envelope.data.indexOf(\"[iFrameSizer]\") === 0) {\n        return;\n      }\n\n      const message = safeParse(envelope.data);\n      if (message.type === \"navigate\") {\n        dispatch(\n          patchLocation({\n            pathname: [message.itemType, message.id].join(\"/\")\n          })\n        );\n      }\n    });\n\n    if (state.isStatic) {\n      return;\n    }\n\n    const source = url.resolve(state.base, payload.url);\n\n    const ws = new WebSocketClient({\n      src: `ws://${global.location.host}${source}/`,\n      reconnect: true,\n      interval: 1000\n    });\n\n    ws.open();\n\n    ws.onOpen(() => dispatch({ type: \"LISTEN_HEARTBEAT\", payload: {} }));\n    ws.onClose(() => dispatch({ type: \"ERROR_HEARTBEAT\", payload: {} }));\n    ws.onError(() => dispatch({ type: \"ERROR_HEARTBEAT\", payload: {} }));\n\n    ws.onMessage(async envelope => {\n      const message = ARSON.parse(envelope.data);\n      const { type, payload } = message;\n\n      switch (type) {\n        case \"error\":\n          return dispatch({\n            type: \"ERROR_HEARTBEAT\",\n            payload\n          });\n        case \"start\": {\n          dispatch(loadSchema());\n          // TODO: only reload pattern if the current pattern is affected\n          return dispatch(loadPatternDemo({ force: false }));\n        }\n        case \"done\": {\n          return dispatch({\n            type: \"LISTEN_HEARTBEAT\",\n            payload: {}\n          });\n        }\n        case \"change\": {\n          return dispatch(loadSchema());\n        }\n        default: {\n          throw new TypeError(`Received unknown message of type ${type}`);\n        }\n      }\n    });\n  }\n);\n\nfunction safeParse(data) {\n  try {\n    return JSON.parse(data);\n  } catch (err) {\n    return {};\n  }\n}\n","import fetch from \"isomorphic-fetch\";\nimport * as demo from \"../selectors/demo\";\n\nexport default (payload) => {\n  return async (dispatch, getState) => {\n    const getSrc = src(getState);\n    const uri = getSrc();\n\n    if (!uri) {\n      return;\n    }\n\n    dispatch({\n      type: \"LOAD_PATTERN_DEMO_START\",\n      payload: { id: uri }\n    });\n\n    const response = await fetch(uri, {\n      headers: { Accept: \"text/html\" }\n    });\n\n    // Bail if the src changed in the meantime\n    if (uri !== getSrc()) {\n      return;\n    }\n\n    const body = await response.text();\n\n    // Bail if the src changed in the meantime\n    if (uri !== getSrc()) {\n      return;\n    }\n\n    if (response.status >= 400) {\n      return dispatch({\n        type: \"LOAD_PATTERN_DEMO_ERROR\",\n        payload: { id: uri, error: body }\n      });\n    }\n\n    dispatch({\n      type: \"LOAD_PATTERN_DEMO_SUCCESS\",\n      payload: { id: uri, contents: body, force: payload.force }\n    });\n  };\n};\n\nfunction src(getState) {\n  return () => demo.selectSrc(getState());\n}\n","import url from \"url\";\nimport { createPromiseThunkAction } from \"./promise-thunk-action\";\nimport fetch from \"../utils/fetch\";\n\nexport default createPromiseThunkAction(\n  \"LOAD_SCHEMA\",\n  async (_, __, getState) => {\n    const response = await fetch(`${prefix(getState().base)}/api/state.json`);\n    return response.json();\n  }\n);\n\nfunction prefix(base) {\n  return base.charAt(base.length - 1) === \"/\"\n    ? base.slice(0, base.length - 1)\n    : base;\n}\n","import { createAction } from \"redux-actions\";\n\nexport default createAction(\"MARK_BLOCK\");\n","import { patchLocation } from \"./\";\n\nexport default openDocumentation;\nexport const type = \"OPEN_DOCUMENTATION\";\n\nfunction openDocumentation() {\n  return (dispatch, getState) => {\n    const state = getState();\n    const pathname = state.base;\n    dispatch(patchLocation({ pathname }));\n  };\n}\n\nopenDocumentation.key = \"\";\nopenDocumentation.property = \"\";\nopenDocumentation.type = type;\n","import urlQuery from \"../utils/url-query\";\nimport { selectId, selectContentType } from \"../selectors/item\";\n\nexport default openFullscreen;\nexport const type = \"OPEN_FULLSCREEN\";\n\nfunction openFullscreen() {\n  return (dispatch, getState) => {\n    if (!global.open) {\n      return;\n    }\n\n    const state = getState();\n    const contentType = selectContentType(state);\n\n    if (contentType !== \"pattern\") {\n      return;\n    }\n\n    const id = selectId(state);\n\n    if (!id) {\n      return;\n    }\n\n    const href = urlQuery.format({\n      pathname: `${state.base}api/demo/${id}.html`\n    });\n\n    global.open(href, \"_blank\");\n  };\n}\n\nopenFullscreen.key = \"\";\nopenFullscreen.property = \"\";\nopenFullscreen.type = type;\n","import { merge } from \"lodash\";\nimport { push } from \"react-router-redux\";\nimport url from \"url\";\n\nexport default patchLocation;\nexport const type = \"PATCH_LOCATION\";\n\nfunction patchLocation(payload) {\n  return (dispatch, getState) => {\n    const state = getState();\n    const location = state.routing.locationBeforeTransitions;\n\n    if (payload.hasOwnProperty(\"pathname\")) {\n      payload.pathname = payload.pathname.indexOf(state.base) === 0\n        ? payload.pathname\n        : `${prefix(state.base)}/${payload.pathname}`;\n    }\n\n    dispatch(push(merge({}, location, payload)));\n  };\n}\n\npatchLocation.type = type;\n\nfunction prefix(base) {\n  return base.charAt(base.length - 1) === \"/\"\n    ? base.slice(0, base.length - 1)\n    : base;\n}\n","import { createAction } from \"redux-actions\";\nimport handleDependentActions from \"./handle-dependent-actions\";\n\nconst ident = i => i;\nconst asyncIdent = async i => i;\n\nexport function createPromiseThunkAction(name, rawCreator) {\n  const creator = rawCreator || asyncIdent;\n\n  const fn = payload => {\n    const delayedAction = createAction(`${name}_DELAYED`);\n    const successAction = createAction(`${name}_SUCCESS`);\n    const startAction = createAction(`${name}_START`);\n    const throwsAction = createAction(`${name}_THROWS`);\n\n    return async (dispatch, getState) => {\n      dispatch(startAction(payload, ident, getState));\n      const delayedTimer = global.setTimeout(() => {\n        dispatch(delayedAction(payload, ident, getState));\n      }, 1000);\n      try {\n        const result = await Promise.resolve(\n          creator(payload, dispatch, getState)\n        );\n        global.clearTimeout(delayedTimer);\n        dispatch(successAction(result));\n        return result;\n      } catch (error) {\n        console.error(error);\n        global.clearTimeout(delayedTimer);\n        dispatch(throwsAction(error));\n        return error;\n      }\n    };\n  };\n  fn.__name = name;\n  return fn;\n}\n\nexport function handlePromiseThunkAction(rawName, handler, options = {}) {\n  const name = rawName.__name || rawName;\n  options.dependencies = options.dependencies || [];\n  const reducer = handleDependentActions(\n    {\n      [`${name}_START`]: handler.start || ident,\n      [`${name}_DELAYED`]: handler.delayed || ident,\n      [`${name}_SUCCESS`]: handler.success || ident,\n      [`${name}_THROWS`]: handler.throws || ident\n    },\n    options\n  );\n  return reducer;\n}\n","import { loadPatternDemo, loadSchema } from \"./\";\n\nexport default reload;\n\nfunction reload() {\n  return async dispatch => {\n    const actions = [\n      async () => dispatch(await Promise.resolve(loadSchema())),\n      loadPatternDemo({ force: true })\n    ];\n\n    await Promise.all(actions.map(dispatch));\n  };\n}\n\nreload.type = \"RELOAD\";\nreload.key = \"\";\nreload.property = \"\";\n","import { patchLocation } from \"./\";\n\nexport default resizeDemo;\nexport const type = \"RESIZE_DEMO\";\n\nfunction resizeDemo(payload) {\n  return dispatch => {\n    dispatch(\n      patchLocation({\n        query: {\n          width: payload.x,\n          height: payload.y\n        }\n      })\n    );\n  };\n}\n\nresizeDemo.type = type;\n","export default scrollDemo;\nexport const type = \"SCROLL_DEMO\";\n\nlet loop;\nlet frame;\n\nfunction scrollDemo(payload) {\n  return (dispatch, getState) => {\n    function run() {\n      loop = global.requestAnimationFrame(() => {\n        const state = getState();\n\n        if (state.scrollDemoX.x !== frame.x) {\n          dispatch({\n            type: \"SCROLL_DEMO_X\",\n            payload: frame.x\n          });\n        }\n        if (state.scrollDemoY.y !== frame.y) {\n          dispatch({\n            type: \"SCROLL_DEMO_Y\",\n            payload: frame.y\n          });\n        }\n        run();\n      });\n    }\n\n    if (!loop) {\n      run();\n    }\n\n    frame = payload;\n  };\n}\n\nscrollDemo.type = type;\n","import scrollparent from \"scrollparent\";\n\nexport default scrollTo;\nexport const type = \"SCROLL_TO\";\n\nconst NOOP = () => {};\n\nfunction scrollTo(to) {\n  const { document } = global;\n\n  if (!document) {\n    return NOOP;\n  }\n\n  const target = getTarget(to);\n\n  if (!target) {\n    return NOOP;\n  }\n\n  const parent = scrollparent(target);\n\n  if (!parent) {\n    return NOOP;\n  }\n\n  parent.scrollTop = target.offsetParent.offsetTop;\n\n  return dispatch => {\n    dispatch({\n      type: \"SCROLLED_TO\",\n      payload: to\n    });\n  };\n}\n\nfunction getTarget(to) {\n  if (typeof to === \"string\") {\n    return document.getElementById(to);\n  }\n\n  return to;\n}\n\nscrollTo.type = type;\n","import { patchLocation } from \"./\";\n\nexport default searchPreview;\nexport const type = \"SEARCH_PREVIEW\";\n\nconst MOVEMENTS = {\n  up: -1,\n  down: 1\n};\n\nfunction searchPreview(payload) {\n  if (typeof payload === \"number\") {\n    return dispatch => {\n      dispatch(\n        patchLocation({\n          query: {\n            \"search-preview\": payload\n          }\n        })\n      );\n    };\n  }\n\n  return (dispatch, getState) => {\n    const state = getState();\n    const delta = MOVEMENTS[payload] || 0;\n\n    dispatch(\n      patchLocation({\n        query: {\n          \"search-preview\": state.searchPreview + delta\n        }\n      })\n    );\n  };\n}\n\nsearchPreview.type = type;\n","import raf from \"raf\";\nimport { patchLocation } from \"./\";\n\nexport default search;\nexport const type = \"SEARCH\";\n\nfunction search(payload) {\n  return (dispatch, getState) => {\n    const state = getState();\n\n    dispatch({\n      type: \"SET_SEARCH\",\n      payload: payload.value\n    });\n\n    raf(() => {\n      if (payload.persist) {\n        dispatch(\n          patchLocation({\n            query: {\n              search: payload.value,\n              \"search-preview\":\n                state.search === payload.value ? state.searchPreview : 0\n            }\n          })\n        );\n      } else if (payload.perform) {\n        dispatch({\n          type: \"PERFORM_SEARCH\",\n          payload: payload.value\n        });\n      }\n    });\n  };\n}\n\nsearch.type = type;\n","import { createAction } from \"redux-actions\";\n\nexport default createAction(\"THEME_LOADED\");\n","import { toggle } from \"./toggle\";\n\nexport default toggle(\"code-enabled\");\n","import { toggle } from \"./toggle\";\n\nexport default toggle(\"components-enabled\");\n","import { toggle } from \"./toggle\";\n\nexport default toggle(\"console-enabled\");\n","import { toggle } from \"./toggle\";\n\nexport default toggle(\"dependencies-enabled\");\n","import { toggle } from \"./toggle\";\n\nexport default toggle(\"dependents-enabled\");\n","import { toggle } from \"./toggle\";\n\nexport default toggle(\"doc-enabled\");\n","import { toggle } from \"./toggle\";\n\nexport default toggle(\"hide-enabled\");\n","import { toggle } from \"./toggle\";\n\nexport default toggle(\"info-enabled\");\n","import { toggle } from \"./toggle\";\n\nexport default toggle(\"shortcuts\");\n","import { toggle } from \"./toggle\";\n\nexport default toggle(\"manifest-enabled\");\n","import { toggle } from \"./toggle\";\n\nexport default toggle(\"navigation-enabled\");\n","import { toggle } from \"./toggle\";\n\nexport default toggle(\"network-enabled\");\n","import { toggle } from \"./toggle\";\n\nexport default toggle(\"opacity\");\n","import { toggle } from \"./toggle\";\n\nexport default toggle(\"rulers\");\n","import { patchLocation, search } from \"./\";\n\nexport default toggleSearch;\n\nexport const type = \"TOGGLE_SEARCH_ENABLED\";\n\nfunction toggleSearch(payload = {}) {\n  return (dispatch, getState) => {\n    const state = getState();\n\n    if (payload.sync) {\n      focus(state.searchEnabled);\n      return;\n    }\n\n    const next = \"focus\" in payload ? payload.focus : !state.searchEnabled;\n\n    if (!next) {\n      dispatch(search({ persist: true, value: value() }));\n    }\n\n    dispatch(\n      patchLocation({ query: { \"search-enabled\": next, \"search-preview\": 0 } })\n    );\n  };\n}\n\ntoggleSearch.type = type;\ntoggleSearch.key = \"search-enabled\";\ntoggleSearch.property = \"searchEnabled\";\n\nfunction focus(next) {\n  if (!next) {\n    return;\n  }\n\n  if (!(\"document\" in global)) {\n    return;\n  }\n\n  setTimeout(() => {\n    const el = global.document.querySelector(\"input[data-search]\");\n\n    if (!el) {\n      return;\n    }\n\n    if (global.document.activeElement !== el) {\n      el.focus();\n    }\n\n    const range = el.value.length;\n    el.setSelectionRange(range, range);\n  }, 100);\n}\n\nfunction value() {\n  if (!(\"document\" in global)) {\n    return;\n  }\n\n  const el = global.document.querySelector(\"input[data-search]\");\n\n  if (!el) {\n    return;\n  }\n\n  return el.value;\n}\n","import { patchLocation } from \"./\";\n\nexport default toggleTheme;\nexport const type = \"TOGGLE_THEME\";\n\nfunction toggleTheme(forced) {\n  return (dispatch, getState) => {\n    const theme = forced\n      ? forced\n      : getState().theme === \"dark\" ? \"light\" : \"dark\";\n    dispatch(\n      patchLocation({\n        query: {\n          theme\n        }\n      })\n    );\n  };\n}\n\ntoggleTheme.type = type;\n","import { camelCase, snakeCase } from \"lodash\";\nimport { patchLocation } from \"./\";\n\nexport function toggle(key) {\n  const property = camelCase(key);\n\n  const fn = (payload = {}) => {\n    return (dispatch, getState) => {\n      const next = \"forced\" in payload ? payload.forced : !getState()[property];\n      dispatch(patchLocation({ query: { [key]: next } }));\n    };\n  };\n\n  fn.type = `TOGGLE_${snakeCase(key).toUpperCase()}`;\n  fn.property = property;\n  fn.key = key;\n  return fn;\n}\n","import { createAction } from \"redux-actions\";\n\nexport default createAction(\"WINDOW_RESIZE\", ({ width, height }) => ({\n  width,\n  height\n}));\n","import React from \"react\";\n\nexport function mountable(Component) {\n  return class MountableComponent extends React.Component {\n    componentDidMount() {\n      if (typeof this.props.onMount === \"function\") {\n        this.props.onMount();\n      }\n    }\n    render() {\n      const { onMount, ...rest } = this.props;\n      return <Component {...rest} />;\n    }\n  };\n}\n\nexport function skippable(Component, prop = \"active\") {\n  return props => (props[prop] === true ? <Component {...props} /> : null);\n}\n","import React from \"react\";\nimport { hydrate } from \"react-dom\";\nimport { Router, browserHistory } from \"@marionebl/react-router\";\nimport { Provider } from \"react-redux\";\nimport { syncHistoryWithStore } from \"react-router-redux\";\n\nimport routes from \"./routes\";\nimport configureStore from \"./store\";\n\nexport default function(data, el) {\n  const store = configureStore(browserHistory, data);\n  const history = syncHistoryWithStore(browserHistory, store);\n\n  const router = (\n    <Provider store={store}>\n      <Router history={history}>{routes(store)}</Router>\n    </Provider>\n  );\n\n  return hydrate(router, el);\n}\n","import React from \"react\";\nimport { Link, styled } from \"@patternplate/components\";\n\nexport default ToggleButton;\n\nfunction ToggleButton(props) {\n  const title =\n    props.title ||\n    `${props.shortcut.description(props)} ${props.shortcut.toString()}`;\n\n  if (props.active === false) {\n    return (\n      <StandIn className={props.className} title={title}>\n        {props.children}\n      </StandIn>\n    );\n  }\n\n  return (\n    <Link\n      className={props.className}\n      title={title}\n      query={{ [props.shortcut.key]: !props.enabled }}\n    >\n      {props.children}\n    </Link>\n  );\n}\n\nconst StandIn = styled.div`\n  font-size: 0;\n  line-height: 0;\n`;\n","import React from \"react\";\nimport { styled } from \"@patternplate/components\";\nimport { findDOMNode } from \"react-dom\";\nimport Helmet from \"react-helmet\";\nimport Markdown from \"../containers/markdown\";\n\nexport default class Documentation extends React.Component {\n  componentWillUpdate(nextProps) {\n    const {props} = this;\n    const changed = props.location.pathname !== nextProps.location.pathname;\n    if (changed && typeof props.requestScroll === \"function\") {\n      props.requestScroll(findDOMNode(this.ref));\n    }\n  }\n\n  render () {\n    const {props} = this;\n    return (\n      <StyledDocumentation ref={ref => this.ref = ref}>\n        <div id=\"doctop\"/>\n        <Helmet\n          title={props.displayName}\n          />\n        <Markdown\n          linkable\n          source={props.doc}\n          />\n      </StyledDocumentation>\n    );\n  }\n}\n\nconst StyledDocumentation = styled.div`\n  box-sizing: border-box;\n  margin: 0 auto;\n  width: 100%;\n  max-width: 860px;\n  padding: 80px 15px 15px 15px;\n  @media screen and (min-width: 720px) {\n    padding: 60px;\n  }\n`;\n","import React from \"react\";\nimport { renderToStaticMarkup } from \"react-dom/server\";\nimport Helmet from \"react-helmet\";\nimport {\n  styled,\n  themes,\n  Symbol,\n  IconDefinitions,\n  svg\n} from \"@patternplate/components\";\n\nimport platform from \"platform\";\n\nconst THEMES = themes();\n\nconst SVG_FAVICON_SUPPORT = [\"Firefox\"];\n\nclass FavIcon extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {};\n  }\n\n  componentDidMount() {\n    if (SVG_FAVICON_SUPPORT.indexOf(platform.name) > -1) {\n      return;\n    }\n\n    svg\n      .png(getSource(this.props))\n      .then(pngHref => this.setState({\n        pngHref\n      }))\n      .catch(err => {\n        console.error(err);\n        this.setState({\n          pngHref: null\n        });\n      });\n  }\n\n  componentWillReceiveProps(next) {\n    if (SVG_FAVICON_SUPPORT.indexOf(platform.name) > -1) {\n      return;\n    }\n\n    svg\n      .png(getSource(next))\n      .then(pngHref => this.setState({\n        pngHref\n      }))\n      .catch(err => {\n        console.error(err);\n        this.setState({\n          pngHref: null\n        });\n      });\n  }\n\n  render() {\n    const source = getSource(this.props);\n    const svgHref = svg.btoa(source);\n\n    return (\n      <Helmet\n        link={[\n          ...(this.state.pngHref ? [{ rel: \"icon\", href: this.state.pngHref, type: \"image/png\" }] : []),\n          {\n            rel: \"icon\",\n            href: svgHref,\n            type: \"image/svg+xml\"\n          }\n        ]}\n      />\n    );\n  }\n}\n\nexport default styled(FavIcon)`\n  width: 100%;\n  height: auto;\n  stroke: ${props => props.theme.colors.color};\n  stroke-width: 0;\n  fill: ${props => props.theme.colors.color};\n`;\n\nfunction getSource(props) {\n  if (!props.source) {\n    return renderToStaticMarkup(\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\n        <Symbol\n          definition={IconDefinitions.patternplate}\n          emit\n          style={{ fill: getFill(props) }}\n        />\n      </svg>\n    );\n  }\n\n  const [purged] = svg.purge([svg.parse(props.source)]);\n  return svg.stringify(purged);\n}\n\nfunction getFill(props) {\n  if (props.error) {\n    return THEMES.dark.error;\n  }\n  return THEMES.dark.active;\n}\n","import React from \"react\";\nimport { styled, css, keyframes, Text } from \"@patternplate/components\";\n\nexport default Indicator;\n\nfunction Indicator(props) {\n  return (\n    <StyledIndicator\n      onClick={props.onClick}\n      title={\n        isValid(props.status) ? `Force sync ${props.shortcut.toString()}` : \"\"\n      }\n    >\n      <StyledLabel size=\"s\" status={props.status}>\n        {getLabel(props)}\n      </StyledLabel>\n      <StyledDot status={props.status} />\n    </StyledIndicator>\n  );\n}\n\nconst StyledDot = styled.div`\n  position: relative;\n  flex-grow: 0;\n  flex-shrink: 0;\n  height: 7.5px;\n  width: 7.5px;\n  margin-right: 5px;\n  border-radius: 50%;\n  background: ${props =>\n    props.status === \"error\" || props.status === \"offline\"\n      ? \"rgb(205, 63, 69)\"\n      : props.theme.colors.active};\n  transition: background 0.4s ease-in-out, opacity 0.5s ease-in;\n  opacity: ${props => (props.status ? 1 : 0)};\n  cursor: ${props => (props.status ? \"pointer\" : \"\")};\n  ${props => getGlow(props)};\n`;\n\nconst StyledIndicator = styled.div`\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  position: relative;\n`;\n\nconst StyledLabel = styled(Text)`\n  position: absolute;\n  right: 20px;\n  color: ${props => props.theme.colors.color};\n  ${props => getOut(props)};\n`;\n\nfunction getGlow(props) {\n  return `\n\t\t&::before {\n\t\t\tcontent: '';\n\t\t\tposition: absolute;\n\t\t\ttop: 50%;\n\t\t\tleft: 50%;\n\t\t\theight: 12px;\n\t\t\twidth: 12px;\n\t\t\tfilter: blur(3px);\n\t\t\tbackground: inherit;\n\t\t\ttransform: translate(-50%, -50%);\n\t\t\topacity: .6;\n\t\t\t${getPulse(props)};\n\t\t}\n\t`;\n}\n\nconst out = keyframes`\n\tto {\n\t\topacity: 0;\n\t}\n`;\n\nfunction getOut(props) {\n  if (props.status !== \"loaded\") {\n    return;\n  }\n\n  return css`\n    animation: ${out} 1s 0.15s;\n    animation-fill-mode: forwards;\n  `;\n}\n\nfunction getLabel(props) {\n  switch (props.status) {\n    case \"error\":\n      return \"error\";\n    case \"offline\":\n      return \"offline\";\n    case \"loaded\":\n      return \"synced\";\n    case \"loading\":\n      return \"syncing\";\n    default:\n      return \"\";\n  }\n}\n\nconst pulse = keyframes`\n  from {\n    opacity: .6;\n    transform: translate(-50%, -50%) scale(1);\n  }\n  50% {\n    opacity: 0;\n    transform: translate(-50%, -50%) scale(.75);\n  }\n  to {\n    opacity: .6;\n    transform: translate(-50%, -50%) scale(1);\n  }\n`;\n\nfunction getPulse(props) {\n  if (props.status !== \"loading\") {\n    return;\n  }\n\n  return css`\n    animation: ${pulse} 1s infinite;\n  `;\n}\n\nfunction isValid(status) {\n  return [\"loading\", \"loaded\"].includes(status);\n}\n","import React from \"react\";\nimport { styled } from \"@patternplate/components\";\n\nexport default Message;\n\nfunction Message(props) {\n  return (\n    <StyledMessage>\n      <StyledMessageContent>\n        {props.message}\n        {props.details && (\n          <StyledDetails>\n            {props.summary && <StyledSummary>{props.summary}</StyledSummary>}\n            {props.details}\n          </StyledDetails>\n        )}\n      </StyledMessageContent>\n    </StyledMessage>\n  );\n}\n\nconst StyledMessage = styled.div`\n  background: ${props => props.theme.colors.error};\n  box-sizing: border-box;\n  width: 100%;\n  padding: 10px 20px;\n`;\n\nconst StyledMessageContent = styled.pre`\n  color: #fff;\n  max-height: calc(100vh - 160px);\n  overflow: scroll;\n`;\n\nconst StyledDetails = styled.details`\n  margin: 10px 0;\n`;\n\nconst StyledSummary = styled.summary`\n  outline: none;\n  cursor: pointer;\n  user-select: none;\n`;\n","import React, { Component } from \"react\";\n\nexport default class ClickOutside extends Component {\n  constructor(props) {\n    super(props);\n    this.handle = this.handle.bind(this);\n    this.getContainer = this.getContainer.bind(this);\n  }\n\n  getContainer(ref) {\n    this.container = ref;\n  }\n\n  render() {\n    return (\n      <div className={this.props.className} ref={this.getContainer}>\n        {this.props.children}\n      </div>\n    );\n  }\n\n  componentDidMount() {\n    global.document.addEventListener(\"click\", this.handle, true);\n  }\n\n  componentWillUnmount() {\n    global.document.removeEventListener(\"click\", this.handle, true);\n  }\n\n  handle(e) {\n    const { props } = this;\n    const el = this.container;\n    if (!el.contains(e.target)) {\n      props.onClickOutside(e);\n    }\n  }\n}\n","import React from \"react\";\nimport Helmet from \"react-helmet\";\nimport { Markdown, styled } from \"@patternplate/components\";\nimport tag from \"tag-hoc\";\nimport Transition from \"react-transition-group/Transition\";\n\nimport PatternDemo from \"./pattern-demo\";\nimport PatternSheet from \"./pattern-sheet\";\n\nconst btoa = global.btoa ? global.btoa : input => Buffer.from(input).toString('base64');\n\nconst VISIBILITY = props => (props.checkers ? \"block\" : \"none\");\nconst CROSSES = props => btoa(`\n<svg width=\"20\" height=\"20\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path stroke-width=\"1\" stroke=\"#f2f2f2\" fill=\"none\" d=\"M10 6v8M6 10h8\"/>\n</svg>\n`);\n\nconst PAD = props => props.padded ? 50 : 0;\nconst OFF = props => props.navigationEnabled ? 300 : 0;\nconst OFFSET = props => PAD(props) + OFF(props);\n\nconst StyledPattern = styled(tag([\"checkers\", \"navigationEnabled\", \"padded\"])(\"div\"))`\n  position: fixed;\n  width: calc(100% - ${props => OFFSET(props) + PAD(props)}px);\n  top: ${PAD}px;\n  left: ${props => OFFSET(props)}px;\n  right: ${PAD}px;\n  bottom: ${PAD}px;\n  box-sizing: border-box;\n  height: 100%;\n  &::before {\n    content: \"\";\n    display: ${VISIBILITY};\n    position: absolute;\n    z-index: 1;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-image: url(\"data:image/svg+xml;base64,${CROSSES}\");\n    background-size: 20px 20px;\n    background-repeat: repeat;\n    background-position: 50% 50%;\n  }\n`;\n\nconst StyledPatternFolder = styled.div`\n  height: 100%;\n  width: 100%;\n`;\n\nconst StyledPatternDoc = styled.div`\n  width: 100%;\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 30px;\n  box-sizing: border-box;\n`;\n\nconst StyledPatternDemo = styled.div`\n  position: relative;\n  z-index: 2;\n  width: 100%;\n  height: 100%;\n  max-width: 1920px;\n  margin: 0 auto;\n`;\n\nconst StyledPatternLoader = styled.div`\n  position: absolute;\n  z-index: 3;\n  top: 0;\n  right: 0;\n  left: 0;\n  height: 3px;\n  ${props => props.hidden ? 'display: none;' : ''}\n  &::after {\n    position: absolute;\n    top: 0;\n    z-index: 2;\n    content: \"\";\n    display: block;\n    width: 100%;\n    height: 100%;\n    background: ${props =>\n      props.error ? props.theme.colors.error : props.theme.colors.active};\n    opacity: 1;\n    transition: ${props => (props.error ? \"none\" : \"transform 1s ease-in-out\")};\n    ${props => {\n      switch (props.status) {\n        case \"entering\":\n          return `\n            transform: translateX(-100%);\n          `;\n        case \"entered\":\n          return `${props =>\n            props.error ? \"\" : \"transform: translateX(-15%);\"}`;\n        case \"exiting\":\n          return `\n            transition: transform .3s ease-out;\n            transform: translateX(0);\n          `;\n        case \"exited\":\n        default:\n          return `\n            transform: translateX(-100%);\n            transition: opacity .3s .25s ease-out;\n          `;\n      }\n    }};\n  }\n`;\n\nconst PatternContainer = styled.div`\n  height: 100%;\n  padding-left: ${props => props.navigationEnabled ? 0 : 60}px;\n`;\n\nexport default class Pattern extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = { srcdoc: false };\n  }\n\n  render() {\n    const { props } = this;\n\n    if (props.contentType !== \"pattern\") {\n      return null;\n    }\n\n    if (props.type === \"folder\") {\n      return (\n        <StyledPatternFolder>\n          <StyledPatternDoc>\n            <Markdown source={props.docs} />\n          </StyledPatternDoc>\n        </StyledPatternFolder>\n      );\n    }\n\n    return (\n      <React.Fragment>\n        <StyledPattern\n          padded={props.screenshot}\n          checkers={props.opacity}\n          navigationEnabled={props.navigationEnabled}\n          >\n          <Helmet\n            title={[getPrefix(props), props.displayName]\n              .filter(Boolean)\n              .join(\": \")}\n          />\n          <Transition\n            in={props.loading || props.error}\n            timeout={{ enter: 1000, exit: 850 }}\n          >\n            {status => (\n              <StyledPatternLoader\n                hidden={props.screenshot}\n                status={status}\n                error={props.error}\n                />\n            )}\n          </Transition>\n          <StyledPatternDemo>\n            <PatternContainer navigationEnabled={props.navigationEnabled}>\n              <PatternDemo\n                src={props.src}\n                contents={props.contents}\n                loading={props.loading}\n                updated={props.updated}\n              />\n            </PatternContainer>\n          </StyledPatternDemo>\n        </StyledPattern>\n        <PatternSheet/>\n      </React.Fragment>\n    );\n  }\n}\n\nfunction getPrefix(props) {\n  if (props.loading) {\n    return \"Load\";\n  }\n  if (props.error) {\n    return \"Error\";\n  }\n  return \"\";\n}\n","import React from \"react\";\nimport { styled } from \"@patternplate/components\";\n\nconst StyledDemo = styled.iframe`\n  width: 100%;\n  height: calc(100% - 30vh);\n  border: 0;\n`;\n\nfunction PatternDemo(props) {\n  const src = typeof props.updated === \"number\"\n    ? `${props.src}?reload=${props.updated}`\n    : props.src;\n\n  return <StyledDemo\n    src={src}\n    referrerpolicy=\"no-referrer\"\n    />;\n}\n\nexport default PatternDemo;\n","import { connect } from \"react-redux\";\nimport React from \"react\";\nimport remark from \"remark\";\nimport emoji from \"remark-gemoji-to-emoji\";\n\nimport { Flag, Headline, Link, Markdown, styled, Tag, Text, ThemeProvider, themes } from \"@patternplate/components\";\n\nimport * as item from \"../../selectors/item\";\nimport Fullscreen from \"../../containers/trigger-fullscreen\";\nimport ToggleOpacity from \"../../containers/toggle-opacity\";\n\nconst processor = remark().use(emoji);\n\nexport default connect(mapProps)(PatternSheet);\n\nfunction PatternSheet(props) {\n  return (\n    <StyledPatternSheet screenshot={props.screenshot}>\n      <StyledPatternSheetContainer>\n          <StyledControlsBox>\n            <StyledName>\n              {props.name}\n              <StyledVersion>@{props.version}</StyledVersion>\n            </StyledName>\n            <ThemeProvider theme={themes().dark}>\n              <StyledControlsArea orient=\"right\">\n                <StyledControlsItem>\n                  <ToggleOpacity />\n                </StyledControlsItem>\n                <StyledControlsItem>\n                  <Fullscreen />\n                </StyledControlsItem>\n              </StyledControlsArea>\n            </ThemeProvider>\n          </StyledControlsBox>\n          {props.description &&\n            <StyledDescription>\n              {processor.processSync(props.description).contents}\n            </StyledDescription>\n          }\n          <StyledBoxLine>\n            <SearchTrigger field=\"flag\" search={props.flag}>\n              <Flag>{props.flag}</Flag>\n            </SearchTrigger>\n            <StyledTagList>\n              {\n                props.tags.map((tag, index) => (\n                  <SearchTrigger key={`${tag}-${index}`} field=\"tags\" search={tag}>\n                    <Tag>{tag}</Tag>\n                  </SearchTrigger>\n                ))\n              }\n            </StyledTagList>\n          </StyledBoxLine>\n          {typeof props.doc === \"string\" &&\n            <StyledMarkdownBox>\n              <Markdown\n                linkable={true}\n                source={props.doc}\n              />\n            </StyledMarkdownBox>\n          }\n      </StyledPatternSheetContainer>\n    </StyledPatternSheet>\n  );\n}\n\n\nconst StyledSearchTrigger = styled.span`\n  &:not(:first-child) {\n    margin-left: 10px;\n  }\n`;\n\nconst StyledLink = styled(Link)`\n  text-decoration: none;\n`;\n\nfunction SearchTrigger(props) {\n  return (\n    <StyledSearchTrigger>\n      <StyledLink\n        className={props.className}\n        query={{\n          \"search-enabled\": true,\n          search: `${props.field}=${props.search}`\n        }}\n        title={`Search other patterns with ${props.field} \"${props.search}\"`}\n      >\n        {props.children}\n      </StyledLink>\n    </StyledSearchTrigger>\n  );\n}\n\nfunction mapProps(state) {\n  return {\n    doc: item.selectContents(state),\n    description: item.selectDescription(state),\n    id: state.id,\n    icon: item.selectIcon(state),\n    type: item.selectType(state),\n    name: item.selectName(state),\n    flag: item.selectFlag(state),\n    tags: item.selectTags(state),\n    version: item.selectVersion(state),\n    screenshot: state.routing.locationBeforeTransitions.query.screenshot === \"true\"\n  };\n}\n\nconst TOOLBAR_HEIGHT = 60;\n\nconst StyledName = styled(props => <Headline {...props} is=\"h1\" order={1}/>)`\n  margin: 0 0 10px 0;\n`;\n\nconst StyledVersion = styled(props => <Headline {...props} is=\"small\" order={3}/>)`\n  display: inline-block;\n  color: ${props => props.theme.colors.color};\n  margin: 0;\n`;\n\nconst StyledDescription = styled(Text)`\n  color: ${props => props.theme.colors.recess};\n  margin-bottom: 20px;\n`;\n\nconst StyledPatternSheet = styled.div`\n  position: relative;\n  z-index: 2;\n  box-sizing: border-box;\n  width: 100%;\n  min-height: 30vh;\n  margin-top: 70vh;\n  padding: 30px 60px;\n  border-top: 1px solid ${props => props.theme.colors.border};\n  background: ${props => props.theme.colors.background};\n`;\n\nconst ORIENTATION = props => {\n  const direction = props.orient === \"right\" ? \"left\" : \"right\";\n  return `margin-${direction}: auto`;\n};\n\nconst StyledPatternSheetContainer = styled.div`\n  margin: 0 auto;\n  max-width: 1240px;\n`;\n\nconst StyledControlsArea = styled.div`\n  display: flex;\n  ${ORIENTATION};\n`;\n\nconst StyledControlsBox = styled.div`\n  display: flex;\n  align-items: center;\n  flex: 0 0 auto;\n  position: relative;\n  z-index: 2;\n  box-sizing: border-box;\n  background: white;\n`;\n\nconst StyledControlsItem = styled.div`\n  & + & {\n    padding-left: 10px;\n  }\n`;\n\nconst StyledTagList = styled.div`\n  display: inline-block;\n  margin-left: 10px;\n  padding: 2px 10px;\n  border-left: 1px solid ${props => props.theme.colors.border};\n`;\n\nconst StyledBoxLine = styled.div`\n  display: flex;\n  align-items: center;\n  min-height: 32px;\n`;\n\nconst StyledMarkdownBox = styled.div`\n  margin-top: 30px;\n`;\n","import React from \"react\";\nimport { debounce } from \"lodash\";\n\nimport { SearchField as SearchFieldComponent } from \"@patternplate/components\";\n\nclass SearchField extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.handleChange = this.handleChange.bind(this);\n    this.handleKeyDown = this.handleKeyDown.bind(this);\n    this.handleStop = debounce(this.props.onStop, 300, { trailing: true });\n    this.timer = null;\n  }\n\n  handleChange(e) {\n    e.persist();\n    this.props.onChange(e);\n    this.handleStop(e);\n  }\n\n  handleKeyDown(e) {\n    const { target } = e;\n    const hasValue = target.value.length > 0;\n    const atEnd = hasValue && target.selectionStart === target.value.length;\n\n    if (e.which === 32 && e.altKey && e.ctrlKey) {\n      e.preventDefault();\n      this.props.onClose();\n    }\n    if (e.which !== 27) {\n      e.stopPropagation();\n    }\n    if (e.which === 27 && hasValue) {\n      e.preventDefault();\n      this.props.onClear();\n    }\n    if (e.which === 38) {\n      this.props.onUp(e);\n    }\n    if (e.which === 39 && atEnd && this.props.suggestion) {\n      e.preventDefault();\n      this.props.onComplete(this.props.suggestion);\n    }\n    if (e.which === 40 && atEnd) {\n      e.preventDefault();\n      this.props.onDown(e);\n    }\n  }\n\n  render() {\n    const props = this.props;\n\n    return (\n      <SearchFieldComponent\n        autoFocus={props.autoFocus}\n        name={props.name}\n        onBlur={props.onBlur}\n        onChange={this.handleChange}\n        onFocus={props.onFocus}\n        onKeyDown={this.handleKeyDown}\n        placeholder={props.placeholder}\n        suggestion={props.suggestion}\n        title={props.title}\n        value={props.value}\n        data-search={props.mark}\n      >\n        {props.children}\n      </SearchFieldComponent>\n    );\n  }\n}\n\nSearchField.defaultProps = {\n  blur: () => {},\n  onChange: () => {},\n  onFocus: () => {},\n  onUp: () => {},\n  onDown: () => {},\n  onBlur: () => {},\n  onStop: () => {},\n  value: \"\"\n};\n\nexport default SearchField;\n","import url from \"url\";\nimport { values } from \"lodash\";\nimport React from \"react\";\nimport {\n  Search as SearchComponents,\n  InnerInfoPane,\n  Icon,\n  Link,\n  Markdown,\n  styled,\n  Text\n} from \"@patternplate/components\";\nimport tag from \"tag-hoc\";\n\nimport Outside from \"./outside\";\nimport SearchField from \"./search-field\";\nimport withToggleStates from \"../connectors/with-toggle-states\";\nimport PassThrough from \"../containers/pass-through\";\n\nconst InfoPane = withToggleStates(InnerInfoPane);\nconst {\n  Search: SearchComponent,\n  SearchResult,\n  SearchResultList,\n  SearchResultHeading,\n  SearchResultPreview,\n  SearchFieldSlot,\n  Close: SearchClose,\n  PassThroughSlot: SearchPassThroughSlot\n} = SearchComponents;\n\nconst NOOP = () => { };\n\nexport default class Search extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleUp = this.handleUp.bind(this);\n    this.handleDown = this.handleDown.bind(this);\n    this.handleActivate = this.handleActivate.bind(this);\n    this.handleScrollRequest = this.handleScrollRequest.bind(this);\n    this.getListRef = this.getListRef.bind(this);\n    this.getSearchResult = this.getSearchResult.bind(this);\n  }\n\n  handleScrollRequest(e) {\n    if (!this.list) {\n      return;\n    }\n    const l = this.list.getBoundingClientRect();\n    const i = e.target.getBoundingClientRect();\n\n    if (i.bottom > l.bottom) {\n      this.list.scrollTop = e.target.offsetTop - l.height + i.height;\n    }\n\n    if (i.top < l.top) {\n      this.list.scrollTop = e.target.offsetTop - 30;\n    }\n  }\n\n  getListRef(ref) {\n    this.list = ref;\n  }\n\n  getSearchResult = (item, type) => (\n    <SearchResult\n      active={(this.props.activeItem || {}).id === item.id}\n      href={[item.contentType, item.id].join('/')}\n      id={item.id}\n      index={item.index}\n      icon={item.manifest.icon || item.type}\n      name={item.manifest.displayName}\n      key={item.id}\n      onActivate={this.props.onActivate}\n      onScrollRequest={this.handleScrollRequest}\n      type={type}\n    />\n  );\n\n  getSearchResultPreview = () => {\n    const item = this.props.activeItem;\n\n    switch (item.contentType) {\n      case \"doc\":\n        return (\n          <SearchResultPreview {...this.props}>\n            <Markdown\n              source={item.contents}\n              />\n          </SearchResultPreview>\n        );\n      default:\n        return (\n          <SearchResultPreview {...this.props}>\n            <InfoPane\n              active\n              demoDependencies={values(item.demoDependencies)}\n              demoDependents={values(item.demoDependents)}\n              dependencies={values(item.dependencies)}\n              dependents={values(item.dependents)}\n              flag={item.manifest.flag}\n              id={item.id}\n              manifest={JSON.stringify(item.manifest, null, \"  \")}\n              name={item.manifest.displayName}\n              tags={item.manifest.tags}\n              version={item.manifest.version}\n            />\n          </SearchResultPreview>\n        );\n    }\n  }\n\n  componentDidMount() {\n    if (typeof this.props.onMount === \"function\") {\n      this.props.onMount();\n    }\n  }\n\n  handleActivate(e) {\n    const id = e.target.getAttribute(\"data-id\");\n    const index = [...this.props.docs, ...this.props.components].findIndex(\n      i => i.id === id\n    );\n\n    if (index > -1) {\n      this.props.onActivate(index);\n    }\n  }\n\n  handleUp(e) {\n    e.stopPropagation();\n    if (this.props.activeItem && this.props.activeItem.index > 0) {\n      e.preventDefault();\n      this.props.onUp();\n    }\n  }\n\n  handleDown(e) {\n    e.stopPropagation();\n    const available = this.props.components.length + this.props.docs.length - 2;\n\n    if (this.props.activeItem && available >= this.props.activeItem.index) {\n      this.props.onDown();\n    }\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const {props} = this;\n\n    if (!props.activeItem) {\n      return props.onSubmit(e);\n    }\n\n    const {activeItem} = props;\n    props.onNavigate(activeItem);\n  }\n\n  render() {\n    const { props } = this;\n\n    const withComponents = props.components.length > 0;\n    const withDocs = props.docs.length > 0;\n\n    return (\n      <SearchComponent\n        activeItem={props.activeItem}\n        docs={props.docs}\n        enabled={props.enabled}\n        inline={props.inline}\n        onActivate={props.inline ? NOOP : this.handleActivate}\n        onClickOutside={props.inline ? NOOP : props.onClickOutside}\n        onBlur={props.inline ? NOOP : props.onBlur}\n        onChange={props.inline ? NOOP : props.onChange}\n        onClear={props.inline ? NOOP : props.onClear}\n        onComplete={props.inline ? NOOP : props.onComplete}\n        onDown={props.inline ? NOOP : this.handleDown}\n        onFocus={props.inline ? NOOP : props.onFocus}\n        onStop={props.inline ? NOOP : props.onStop}\n        onSubmit={props.inline ? NOOP : this.handleSubmit}\n        onUp={props.inline ? NOOP : this.handleUp}\n        shortcuts={props.shortcuts}\n        suggestion={props.suggestion}\n        legend={props.legend}\n      >\n        <SearchResultList innerRef={this.getListRef}>\n          {withDocs > 0 && (\n            <SearchResultHeading>Docs ({props.docs.length})</SearchResultHeading>\n          )}\n\n          {props.docs.map(d => this.getSearchResult(d, \"doc\", props))}\n\n          {withComponents > 0 && (\n            <SearchResultHeading navigationEnabled={props.navigationEnabled}>\n              Components ({props.components.length})\n            </SearchResultHeading>\n          )}\n\n          {props.components.map(d => this.getSearchResult(d, \"pattern\"))}\n        </SearchResultList>\n\n        {(withComponents || withDocs) && this.getSearchResultPreview()}\n\n        <SearchFieldSlot>\n          <SearchField\n            autoFocus={!props.inline}\n            linkTo=\"/search\"\n            mark={props.inline ? null : true}\n            name={props.inline ? \"inline-search\" : \"search\"}\n            onBlur={props.onBlur}\n            onChange={props.onChange}\n            onClear={props.onClear}\n            onClose={props.onClose}\n            onComplete={props.onComplete}\n            onDown={this.handleDown}\n            onFocus={props.onFocus}\n            onStop={props.onStop}\n            onUp={this.handleUp}\n            placeholder=\"Search\"\n            suggestion={props.suggestion}\n            title={`Search for patterns ${props.shortcuts.toggleSearch.toString()}`}\n            value={props.value}\n          >\n            {props.enabled &&\n              <SearchClose\n                shortcut={props.shortcuts.close}\n                clears={typeof props.value === \"string\" && props.value.length > 0}\n              />\n            }\n          </SearchField>\n        </SearchFieldSlot>\n        <SearchPassThroughSlot>\n          <PassThrough query={{ \"search-enabled\": true, search: null }} />\n        </SearchPassThroughSlot>\n      </SearchComponent>\n    );\n  }\n}\n","import React from \"react\";\nimport { styled, Icon } from \"@patternplate/components\";\n\nimport ToggleButton from \"./common/toggle-button\";\n\nexport default Hamburger;\n\nfunction Hamburger(props) {\n  return (\n    <StyledToggleButton\n      enabled={props.enabled}\n      shortcut={props.shortcut}\n      >\n      <Icon symbol=\"hamburger\"/>\n      {props.shortcut.toString()}\n    </StyledToggleButton>\n  );\n}\n\nconst StyledToggleButton = styled(ToggleButton)`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 0;\n  line-height: 0;\n  width: 60px;\n  height: 60px;\n  cursor: pointer;\n  color: inherit;\n`;\n","import React from \"react\";\nimport { styled, Icon } from \"@patternplate/components\";\n\nimport ToggleButton from \"./common/toggle-button\";\n\nexport default Opacity;\n\nfunction Opacity(props) {\n  return (\n    <StyledToggleButton enabled={props.enabled} shortcut={props.shortcut}>\n      <StyledIcon symbol=\"checkers-inverted\" /> {props.shortcut.toString()}\n    </StyledToggleButton>\n  );\n}\n\nconst StyledIcon = styled(Icon)`\n  fill: ${props => props.theme.colors.background};\n`;\n\nconst StyledToggleButton = styled(ToggleButton)`\n  font-size: 0;\n  line-height: 0;\n`;\n","import React from \"react\";\nimport { styled, Link, Icon } from \"@patternplate/components\";\n\nexport default SearchButton;\n\nfunction SearchButton(props) {\n  return (\n    <StyledLink\n      debug\n      title={`Enable search ${props.shortcut.toString()}`}\n      query={{ \"search-enabled\": !props.enabled }}\n    >\n      <StyledIcon base={props.base} symbol=\"search\" />\n      Search\n    </StyledLink>\n  );\n}\n\nconst StyledIcon = styled(Icon)`\n  fill: ${props => props.theme.colors.color};\n`;\n\nconst StyledLink = styled(Link)`\n  font-size: 0;\n`;\n","import React from \"react\";\nimport { styled, Link, Icon } from \"@patternplate/components\";\n\nexport default Fullscreen;\n\nfunction Fullscreen(props) {\n  return (\n    <StyledLink\n      external\n      title={`Open pattern demo for \"${props.id}\" in a new tab`}\n      href={props.href}\n    >\n      <StyledIcon symbol=\"fullscreen\" />\n    </StyledLink>\n  );\n}\n\nconst StyledIcon = styled(Icon)`\n  fill: ${props => props.theme.colors.background};\n`;\n\nconst StyledLink = styled(Link)`\n  font-size: 0;\n  line-height: 0;\n`;\n","import { connect } from \"react-redux\";\nimport selectItem from \"../selectors/item\";\n\nexport default connect(withActiveForPattern);\n\nfunction withActiveForPattern(state) {\n  const item = selectItem(state);\n  return {\n    active: item ? item.contentType === \"pattern\" : false\n  };\n}\n","import { connect } from \"react-redux\";\nimport selectItem from \"../selectors/item\";\n\nexport default connect(withId);\n\nfunction withId(state) {\n  const item = selectItem(state);\n  return {\n    id: item ? item.id : null\n  };\n}\n","import { connect } from \"react-redux\";\n\nexport default connect(withToggleStates);\n\nfunction withToggleStates(state) {\n  return {\n    dependenciesEnabled: state.dependenciesEnabled,\n    dependentsEnabled: state.dependentsEnabled,\n    manifestEnabled: state.manifestEnabled\n  };\n}\n","import assert from \"assert\";\nimport { connect } from \"react-redux\";\nimport { values } from \"lodash\";\nimport shortcuts from \"../shortcuts\";\n\nconst s = values(shortcuts());\n\nexport default function withToggle(action) {\n  const shortcut = s.find(i => i.key === action.key);\n\n  assert(\n    shortcut,\n    `${action} passed to withToggle has no matching shortcut found for ${action.key}`\n  );\n\n  return Component => {\n    const mapProps = state => {\n      const enabled = state[action.property];\n      return { enabled, shortcut };\n    };\n    return connect(mapProps)(Component);\n  };\n}\n","import React from \"react\";\nimport Helmet from \"react-helmet\";\nimport tag from \"tag-hoc\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { createSelector } from \"reselect\";\nimport {\n  Link,\n  Icon,\n  styled,\n  injection,\n  Text,\n  ThemeProvider,\n  themes,\n  css\n} from \"@patternplate/components\";\n\nimport * as actions from \"../actions\";\nimport * as demo from \"../selectors/demo\";\n\nimport Logo from \"./logo\";\nimport Favicon from \"./favicon\";\nimport Indicator from \"./indicator\";\nimport ConnectedLink from \"./link\";\nimport Message from \"./message\";\nimport Navigation, { NavigationHeader, NavigationToolbar } from \"./navigation\";\nimport ToggleNavigation from \"./toggle-navigation\";\nimport ToggleSearch from \"./toggle-search\";\nimport Search from \"./search\";\n\nconst selectThemes = createSelector(state => state.config.ui, ui => themes(ui));\n\nconst selectLines = createSelector(\n  state => state.messages,\n  demo.selectSrc,\n  (messages, src) => (messages[src] || \"\").split(\"\\n\").filter(Boolean)\n);\n\nconst selectMessage = createSelector(selectLines, lines =>\n  lines\n    .slice(0, 2)\n    .map(l => l.trim())\n    .join(\"\\n\")\n);\n\nconst selectHasMessage = createSelector(\n  selectMessage,\n  message => typeof message === \"string\" && message !== \"\"\n);\n\nfunction mapProps(state) {\n  const q = state.routing.locationBeforeTransitions.query;\n\n  return {\n    base: state.base,\n    description: state.schema.description,\n    lightbox: state.lightbox,\n    location: state.routing.locationBeforeTransitions,\n    networkEnabled: state.networkEnabled,\n    logo: state.config.ui.renderedLogo,\n    navigationEnabled: state.navigationEnabled,\n    searchEnabled: state.searchEnabled,\n    theme: state.theme,\n    themes: selectThemes(state),\n    title: state.config.title || state.schema.name,\n    hasMessage: selectHasMessage(state),\n    screenshot: q.screenshot === \"true\",\n    jsWarningEnabled: q[\"js-warning-enabled\"] !== \"false\" && q[\"js-warning-enabled\"] !== false,\n    browserWarningEnabled: q[\"browser-warning-enabled\"] !== \"false\" && q[\"browser-warning-enabled\"] !== false,\n  };\n}\n\nfunction mapDispatch(dispatch) {\n  return bindActionCreators(\n    {\n      onLoad: () => actions.listen({ url: \"api\" }),\n      onResize: actions.windowResize\n    },\n    dispatch\n  );\n}\n\nconst injections = [\n  {\n    target: Link,\n    source: ConnectedLink\n  }\n];\n\nclass Application extends React.Component {\n  componentDidMount() {\n    document.body.style.overflow = this.props.screenshot ? \"hidden\" : \"auto\";\n  }\n\n  componentDidUpdate() {\n    document.body.style.overflow = this.props.screenshot ? \"hidden\" : \"auto\";\n  }\n\n  render() {\n    const { props } = this;\n    return (\n      <injection.InjectionProvider injections={injections}>\n        <ThemeProvider theme={props.themes[props.theme]}>\n          <StyledApplication screenshot={props.screenshot}>\n            <Helmet meta={meta(props)} title={props.title} />\n            <Favicon />\n            <ThemeProvider theme={props.themes.dark}>\n              <React.Fragment>\n                <NavigationControl\n                  data-toggle-name=\"navigation\"\n                  data-trigger-name=\"navigation\"\n                  data-toggle-enabled={props.navigationEnabled}\n                  enabled={props.navigationEnabled}\n                >\n                  <ToggleNavigation />\n                </NavigationControl>\n                <StyledNavigationBox\n                  data-toggle-name=\"navigation\"\n                  data-toggle-enabled={props.visible}\n                  enabled={props.navigationEnabled}\n                  >\n                  <Navigation>\n                    <NavigationHeader>\n                      <Logo />\n                    </NavigationHeader>\n                    <NavigationToolbar>\n                      <div />\n                      <ToggleSearch />\n                      <Indicator />\n                    </NavigationToolbar>\n                  </Navigation>\n                </StyledNavigationBox>\n              </React.Fragment>\n            </ThemeProvider>\n            <StyledContentContainer>\n              <StyledContent>\n                {props.browserWarningEnabled &&\n                  <StyledBrowserWarning\n                    navigationEnabled={props.navigationEnabled}\n                    data-browser-warning\n                  >\n                    <StyledBrowserContainer>\n                      <StyledBrowserContent>\n                        <StyledWarningLabel>\n                          Nice browser. Is it antique?\n                        </StyledWarningLabel>\n                        <StyledBrowserText>\n                          No, seriously - your browser is so old that some\n                          features of patternplate don't work as expected.\n                        </StyledBrowserText>\n                        <StyledBrowserText>\n                          Don't worry - you can either continue with a restricted\n                          version or install an up-to-date browser.\n                        </StyledBrowserText>\n                      </StyledBrowserContent>\n                      <StyledBrowserContainerClose\n                        title={`Close browser warning`}\n                        query={{ \"browser-warning-enabled\": false }}\n                      >\n                        <Icon symbol=\"close\" />\n                      </StyledBrowserContainerClose>\n                    </StyledBrowserContainer>\n                  </StyledBrowserWarning>\n                }\n                {props.jsWarningEnabled &&\n                  <StyledBrowserWarning\n                    navigationEnabled={props.navigationEnabled}\n                    data-js-warning\n                  >\n                    <StyledBrowserContainer>\n                      <StyledBrowserContent>\n                        <StyledWarningLabel>We messed up.</StyledWarningLabel>\n                        <StyledBrowserText>\n                          Sorry, but your user experience might be affected.\n                        </StyledBrowserText>\n                        <Text>- Try reloading the page</Text>\n                        <Text>\n                          - Report the problem at\n                          github.com/patternplate/patternplate\n                        </Text>\n                      </StyledBrowserContent>\n                      <StyledBrowserContainerClose\n                        title={`Close browser warning`}\n                        query={{ \"js-warning-enabled\": false }}\n                      >\n                        <Icon symbol=\"close\" />\n                      </StyledBrowserContainerClose>\n                    </StyledBrowserContainer>\n                  </StyledBrowserWarning>\n                }\n                {props.hasMessage && (\n                  <StyledMessageBox>\n                    <Message />\n                  </StyledMessageBox>\n                )}\n                {props.children}\n                {props.searchEnabled && (\n                  <ThemeProvider theme={props.themes.dark}>\n                    <StyledSearchBox\n                      navigationEnabled={props.navigationEnabled}\n                      screenshot={props.screenshot}\n                    >\n                      <StyledSearchFrame>\n                        <Search />\n                      </StyledSearchFrame>\n                    </StyledSearchBox>\n                  </ThemeProvider>\n                )}\n              </StyledContent>\n            </StyledContentContainer>\n          </StyledApplication>\n        </ThemeProvider>\n      </injection.InjectionProvider>\n    );\n  }\n}\n\nexport default connect(mapProps, mapDispatch)(Application);\n\nconst WIDTH = 300;\nconst NAVIGATION_WIDTH = props => (props.enabled ? WIDTH : 0);\nconst TOOLBAR_HEIGHT = 60;\n\nconst StyledWarningLabel = styled(Text)`\n  font-weight: bold;\n  margin-bottom: 1.3em;\n`;\n\nconst StyledBrowserWarning = styled.div`\n  display: none; /* overridden by separate js if needed */\n  box-sizing: border-box;\n  position: absolute;\n  position: sticky;\n  top: 0;\n  z-index: 4;\n  right: 0;\n  left: 0;\n  width: 100%;\n  padding: 15px 20px;\n  padding-left: ${props => (props.navigationEnabled ? 20 : 60)}px;\n  background: ${props => props.theme.colors.warning};\n`;\n\nconst StyledBrowserContainer = styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  max-width: 1240px;\n  margin: 0 auto;\n  justify-content: space-between;\n`;\n\nconst StyledBrowserContent = styled.div``;\n\nconst StyledBrowserText = styled(Text)`\n  margin-bottom: 1.3em;\n`;\n\nconst StyledBrowserContainerClose = styled(Link)`\n  flex-shrink: 0;\n  margin-left: 15px;\n  &:link,\n  &:visited,\n  &:active {\n    color: ${props => props.theme.colors.color};\n  }\n`;\n\nconst StyledApplication = styled.div`\n  position: relative;\n  box-sizing: border-box;\n  display: flex;\n  width: 100%;\n  height: 100%;\n  background: ${props => props.theme.colors.background};\n\n  ${props =>\n    !props.screenshot\n      ? \"\"\n      : css`\n          height: calc(100vh - 100px);\n          width: calc(100vw - 100px);\n          margin: 50px;\n          border-radius: 10px;\n          box-shadow: 0 0 30px rgba(0, 0, 0, 0.15);\n          overflow: hidden;\n        `};\n`;\n\nconst StyledNavigationBox = styled(tag([\"enabled\"])(\"div\"))`\n  position: relative;\n  z-index: 2;\n  height: 100%;\n  width: ${NAVIGATION_WIDTH}px;\n  flex: 0 0 ${NAVIGATION_WIDTH}px;\n  overflow: hidden;\n  &[data-toggle-enabled=\"true\"] {\n    display: block;\n  }\n  &[data-toggle-enabled=\"false\"] {\n    display: none;\n  }\n`;\n\nconst StyledMessageBox = styled.div`\n  position: absolute;\n  box-sizing: border-box;\n  z-index: 3;\n  padding: 15px;\n  width: 100%;\n  overflow: hidden;\n`;\n\nconst StyledContent = styled.div`\n  flex: 1 1 100%;\n  width: 100%;\n`;\n\nconst StyledContentContainer = styled.div`\n  flex: 1 1 calc(100% - ${NAVIGATION_WIDTH}px);\n  width: calc(100% - ${NAVIGATION_WIDTH}px);\n  flex-direction: column;\n  overflow: auto;\n  position: relative;\n`;\n\nconst WITH_SCREENSHOT_OFFSET = factor => props => {\n  if (props.screenshot) {\n    return factor * 50;\n  }\n  return 0;\n};\n\nconst WITH_NAVIGATION_OFFSET = factor => props => {\n  if (props.navigationEnabled) {\n    return factor * 300;\n  }\n  return 0;\n};\n\nconst SUM = (...args) => props => args.reduce((acc, fn) => acc + fn(props), 0);\n\nconst StyledSearchBox = styled.div`\n  position: fixed;\n  top: 12.5vh;\n  bottom: 10vh;\n  right: ${WITH_SCREENSHOT_OFFSET(1)}px;\n  left: ${SUM(WITH_NAVIGATION_OFFSET(1), WITH_SCREENSHOT_OFFSET(1))}px;\n  width: calc(\n    100% - ${SUM(WITH_NAVIGATION_OFFSET(1), WITH_SCREENSHOT_OFFSET(2))}px\n  );\n  pointer-events: none;\n`;\n\nconst StyledSearchFrame = styled.div`\n  width: 90%;\n  min-width: 320px;\n  max-width: 750px;\n  max-height: 100%;\n  margin: 0 auto;\n  overflow: hidden;\n`;\n\nconst StyledFloatingBox = styled.div`\n  position: absolute;\n  pointer-events: none;\n  z-index: 2;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  padding: 10px 15px;\n  height: 300px;\n  display: flex;\n`;\n\nconst StyledInfoPane = styled.div`\n  flex: 0 0 auto;\n  box-sizing: border-box;\n  pointer-events: all;\n`;\n\nconst StyledPane = styled.div`\n  flex: 1 1 auto;\n  box-sizing: border-box;\n  height: 100%;\n  width: 100%;\n  overflow: hidden;\n  pointer-events: all;\n`;\n\nconst NavigationControl = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  z-index: 5;\n  top: 0;\n  left: ${props => (props.enabled ? 300 : 0)}px;\n  transform: translate(-${props => (props.enabled ? 100 : 0)}%);\n  color: ${props =>\n    props.enabled ? props.theme.colors.color : props.theme.colors.background};\n  width: 60px;\n  height: 60px;\n  background: ${props =>\n    props.enabled ? props.theme.colors.backgroundSecondary : \"#fff\"};\n\n  &[data-toggle-enabled=\"true\"] {\n    left: 300;\n    transform: translate(-100%);\n    color: ${props => props.theme.colors.color};\n    background: ${props => props.theme.colors.backgroundSecondary};\n  }\n\n  &[data-toggle-enabled=\"false\"] {\n    left: 0;\n    transform: translate(0);\n    color: ${props => props.theme.colors.background};\n    background: #fff;\n  }\n\n  @media screen and (min-width: 720px) {\n    background: transparent;\n    &::before {\n      display: none;\n    }\n  }\n`;\n\nfunction meta(props) {\n  return [\n    { name: \"description\", content: props.description },\n    { name: \"viewport\", content: \"width=device-width, initial-scale=1\" }\n  ];\n}\n","import { themes } from \"@patternplate/components\";\nimport { connect } from \"react-redux\";\nimport { createSelector } from \"reselect\";\nimport { bindActionCreators } from \"redux\";\n\nimport * as actions from \"../actions\";\n\nimport Documentation from \"../components/documentation\";\nimport selectItem from \"../selectors/item\";\nimport {flat as selectPool} from \"../selectors/pool\";\n\nexport default connect(mapState, mapDispatch)(Documentation);\n\nconst selectNotFound = createSelector(\n  state => state.routing.locationBeforeTransitions.pathname,\n  url => `\n# Documentation not found\n\n> Pretty sure these aren't the hypertext documents you are looking for.\n\nWe looked everywhere and could not find a single thing at \\`${url}\\`.\n\nYou might want to navigate back to [Home](/) or use the [Search](?search-enabled=true).\n\n---\n\nHelp us to make this message more helpful on [GitHub](https://github.com/patternplate/patternplate)\n`\n);\n\nconst selectNoDocs = () => `\n# :construction: Add documentation\n\n> Undocumented software could not exist just as well.\n>\n> – The Voice of Common Sense\n\nCurrently there is no readme data at \\`./patterns/readme.md\\`, so we left this\nfriendly reminder here to change that soon.\n\nYou could start right away:\n\n\\`\\`\\`sh\necho \"# Docs\\\\n This patternplate contains ...\" > patterns/readme.md\n\\`\\`\\`\n\nSome ideas on what to write into your pattern readme\n\n*  Why this Living Styleguide interface exists, e.g. what problems it should solve\n*  What the components in are intended for, e.g. a brand, website or product\n*  The component hierarchy you use, e.g. Atomic Design\n*  Naming conventions\n*  Rules for dependencies\n*  Browser matrix\n\n---\n\nHelp us to make this message more helpful on [GitHub](https://github.com/patternplate/patternplate).\n`;\n\nconst selectDocItem = createSelector(\n  selectItem,\n  selectPool,\n  state => state.id,\n  (item, pool, id) => {\n    if (id === \"/\") {\n      const first = pool.find(i => i.contentType === \"doc\");\n      if (first) {\n        return first;\n      }\n    }\n    return item;\n  }\n);\n\nconst selectDoc = createSelector(\n  selectDocItem,\n  selectNoDocs,\n  selectNotFound,\n  (item, noDocs, notFound) => {\n    if (item && item.contents) {\n      return item.contents;\n    }\n\n    if (item && !item.contents) {\n      return noDocs;\n    }\n\n    return notFound;\n  }\n);\n\nconst selectDisplayName = createSelector(\n  selectDocItem,\n  item => {\n    if (!item) {\n      return 'patternplate';\n    }\n    return item.manifest.displayName;\n  }\n);\n\nconst selectType = createSelector(selectItem, match => {\n  if (match && match.contents) {\n    return \"doc\";\n  }\n  if (match && !match.contents) {\n    return \"fallback\";\n  }\n  return \"not-found\";\n});\n\nconst selectThemes = createSelector(\n  state => state.config.color,\n  color => themes(color)\n);\n\nfunction mapState(state) {\n  return {\n    displayName: selectDisplayName(state),\n    doc: selectDoc(state),\n    themes: selectThemes(state),\n    type: selectType(state),\n    isStatic: state.isStatic\n  };\n}\n\nfunction mapDispatch(dispatch) {\n  return bindActionCreators(\n    {\n      requestScroll: actions.scrollTo\n    },\n    dispatch\n  );\n}\n","import { connect } from \"react-redux\";\n\nimport Favicon from \"../components/favicon\";\n\nexport default connect(mapState)(Favicon);\n\nfunction mapState(state) {\n  return {\n    error: state.demo.error,\n    source: state.config.ui.favicon\n  };\n}\n","import { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport * as actions from \"../actions\";\nimport Indicator from \"../components/indicator\";\n\nexport default connect(mapProps, mapDispatch)(Indicator);\n\nfunction mapProps(state) {\n  return {\n    status: selectStatus(state),\n    shortcut: state.shortcuts.reload\n  };\n}\n\nfunction mapDispatch(dispatch) {\n  return bindActionCreators(\n    {\n      onClick: actions.reload\n    },\n    dispatch\n  );\n}\n\nfunction selectStatus(state) {\n  if (state.demo.error) {\n    return \"error\";\n  }\n  return state.connection;\n}\n","import url from \"url\";\nimport queryString from \"querystring\";\nimport { Link } from \"@patternplate/components\";\nimport { pickBy } from \"lodash\";\nimport { connect } from \"react-redux\";\nimport { push } from \"react-router-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { scrollTo } from \"../actions\";\n\nexport default connect(mapState, mapDispatch)(Link.RawLink);\n\nfunction mapState(state, own) {\n  const location = state.routing.locationBeforeTransitions;\n  return Object.assign({}, own,\n    {href: getHref(own, { base: state.base, location })}\n  );\n}\n\nfunction mapDispatch(dispatch, ownProps) {\n  return bindActionCreators(\n    {\n      onClick(e) {\n        if (ownProps.external) {\n          return { type: null };\n        }\n        e.preventDefault();\n        const parsed = url.parse(e.currentTarget.href);\n\n        if (parsed.hash) {\n          scrollTo(parsed.hash.slice(1));\n        }\n\n        return push([parsed.path, parsed.hash].join(\"\"));\n      }\n    },\n    dispatch\n  );\n}\n\nfunction getHref(props, context) {\n  if (props.external === true || !context.location) {\n    return props.href;\n  }\n\n  const parsed = props.href\n    ? url.parse(props.href)\n    : {\n        pathname: context.location.pathname,\n        query: queryString.stringify(context.location.query)\n      };\n\n  parsed.query = queryString.parse(parsed.query);\n\n  const query = props.query === null\n    ? {}\n    : pickBy(\n      Object.assign(\n        {},\n        context.location.query,\n        parsed.query,\n        props.query || context.location.query\n      ),\n      (value, key) => {\n        // TODO: deduce this for all keys from reduce config\n        // special case \"navigation-enabled\", invert logic\n        if (key === \"navigation-enabled\") {\n          return value !== true && value !== \"true\";\n        }\n\n        // if the key is not in the current query, add it\n        if (!context.location.query.hasOwnProperty(key)) {\n          return true;\n        }\n        // omit \"falsy\" values to keep url shorter\n        return value !== \"false\" && value !== \"0\" && !!(value);\n      }\n    );\n\n  const pathname =\n    typeof parsed.pathname === \"string\"\n      ? prefix(context.base, parsed.pathname)\n      : context.location.pathname;\n\n  return url.format({\n    pathname,\n    query,\n    hash: props.hash || (parsed.hash || \"#\").slice(1)\n  });\n}\n\nfunction prefix(base, pathname) {\n  const b = norm(base);\n  const p = norm(pathname);\n\n  if (p === '') {\n    return `/${b}`;\n  }\n\n  if (p.startsWith(b)) {\n    return `/${p}`;\n  }\n\n  return `/${[norm(base), norm(pathname)].join(\"/\")}`;\n}\n\nfunction norm(p) {\n  return p.split(\"/\").filter(Boolean).join(\"/\");\n}\n","import { connect } from \"react-redux\";\n\nimport { Logo } from \"@patternplate/components\";\n\nexport default connect(mapState)(Logo);\n\nfunction mapState(state) {\n  return {\n    source: state.config.ui.renderedLogo\n  };\n}\n","import { createSelector } from \"reselect\";\nimport { bindActionCreators } from \"redux\";\nimport { connect } from \"react-redux\";\nimport { Markdown, themes } from \"@patternplate/components\";\n\nimport { flat as selectPool } from \"../selectors/pool\";\nimport { scrollTo } from \"../actions\";\n\nconst selectWidgetSrc = createSelector(\n  state => state.staticBase,\n  (staticBase, manifest) => `${staticBase}/widgets.js`\n);\n\nconst selectThemes = createSelector(\n  state => state.config.ui,\n  ui => themes(ui)\n);\n\n\nfunction mapProps(state) {\n  const location = state.routing.locationBeforeTransitions;\n  return {\n    base: state.base,\n    hash: location.hash,\n    pathname: location.pathname,\n    query: location.query,\n    widgetSrc: selectWidgetSrc(state),\n    widgetState: {\n      themes: selectThemes(state),\n      base: state.base,\n      pool: selectPool(state)\n    }\n  };\n}\n\nexport function mapDispatch(dispatch) {\n  return bindActionCreators({ scrollTo }, dispatch);\n}\n\nexport default connect(mapProps, mapDispatch)(Markdown);\n","import { connect } from \"react-redux\";\nimport { createSelector } from \"reselect\";\nimport { skippable } from \"../behaviours\";\n\nimport Message from \"../components/message\";\nimport * as demo from \"../selectors/demo\";\n\nexport default connect(mapState)(skippable(Message));\n\nconst selectLines = createSelector(\n  state => state.messages,\n  demo.selectSrc,\n  (messages, src) => (messages[src] || \"\").split(\"\\n\").filter(Boolean)\n);\n\nconst selectMessage = createSelector(selectLines, lines =>\n  lines\n    .slice(0, 2)\n    .map(l => l.trim())\n    .join(\"\\n\")\n);\n\nconst selectDetails = createSelector(selectLines, lines => {\n  if (lines.length <= 2) {\n    return \"\";\n  }\n  return lines.join(\"\\n\");\n});\n\nconst selectActive = createSelector(\n  selectMessage,\n  message => typeof message === \"string\" && message !== \"\"\n);\n\nfunction mapState(state) {\n  return {\n    active: selectActive(state),\n    message: selectMessage(state),\n    details: selectDetails(state),\n    summary: \"Details\"\n  };\n}\n","import url from \"url\";\nimport { connect } from \"react-redux\";\nimport { push } from \"react-router-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { MainNavigation } from \"@patternplate/components\";\nimport { patchLocation } from \"../actions\";\n\nimport selectNavigation from \"../selectors/navigation\";\nimport selectDocs from \"../selectors/docs\";\n\nexport default connect(mapProps, mapDispatch)(MainNavigation);\nexport const NavigationHeader = MainNavigation.NavigationHeader;\nexport const NavigationToolbar = MainNavigation.NavigationToolbar;\n\nfunction mapProps(state) {\n  return {\n    active: state.id,\n    docs: selectDocs(state),\n    componentsEnabled: state.componentsEnabled,\n    navigation: selectNavigation(state),\n    query: state.routing.locationBeforeTransitions.query,\n  };\n}\n\nfunction mapDispatch(dispatch) {\n  return bindActionCreators(\n    {\n      onItemClick(e) {\n        e.preventDefault();\n\n        if (!e.currentTarget.href) {\n          return { type: \"noop\" };\n        }\n\n        const parsed = url.parse(e.currentTarget.href);\n        return push(`${parsed.pathname}?${parsed.query}`);\n      },\n      onLabelClick(query) {\n        return patchLocation({query});\n      }\n    },\n    dispatch\n  );\n}\n","import { connect } from \"react-redux\";\nimport Documentation from \"../components/documentation\";\n\nexport default connect(state => {\n  return {\n    base: state.base,\n    id: state.id,\n    docs: {\n      contents: selectNotFound(state)\n    }\n  };\n})(Documentation);\n\nfunction selectNotFound(state) {\n  const url = state.routing.locationBeforeTransitions.pathname;\n  return `\n# Nothing found\n\n> Pretty sure these aren't the hypertext documents you are looking for.\n\nWe looked everywhere and could not find a single thing at \\`${url}\\`.\n\nYou might want to navigate back to [Home](/) or use the search.\n\n---\n\nHelp us to make this message more helpful on [GitHub](https://github.com/patternplate/patternplate)\n`;\n}\n","import { entries } from \"lodash\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\n\nexport default connect(mapProps)(PassThrough);\n\nfunction PassThrough(props) {\n  return (\n    <div>\n      {props.items.map(([name, value]) => (\n        <input type=\"hidden\" key={name} name={name} value={value} />\n      ))}\n    </div>\n  );\n}\n\nfunction mapProps(state, own) {\n  const { query } = state.routing.locationBeforeTransitions;\n  const q = { ...query, ...(own.query || {}) };\n  const items = entries(q).filter(([, value]) => value !== null);\n  return { items };\n}\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport { createSelector } from \"reselect\";\nimport * as demo from \"../selectors/demo\";\nimport selectItem, * as items from \"../selectors/item\";\nimport Pattern from \"../components/pattern\";\n\nimport * as actions from \"../actions\";\n\nclass PatternContainer extends React.Component {\n  render() {\n    const { props } = this;\n    return (\n      <Pattern\n        contents={props.contents}\n        contentType={props.contentType}\n        docs={props.docs}\n        error={props.error}\n        displayName={props.displayName}\n        loading={props.loading}\n        opacity={props.opacity}\n        src={props.src}\n        type={props.type}\n        updated={props.updated}\n        navigationEnabled={props.navigationEnabled}\n        screenshot={props.screenshot}\n      />\n    );\n  }\n}\n\nexport default connect(mapState, mapDispatch)(PatternContainer);\n\nconst DEFAULT_PATTERN_CONTENTS = `\n# :construction: Add documentation\n\n> Undocumented software could not exist just as well.\n>\n> – The Voice of Common Sense\n\nCurrently there is no readme data for this pattern folder.\nWe left this friendly reminder for you to change that soon.\n\n---\n\nHelp us to make this message more helpful on [GitHub](https://github.com/patternplate/patternplate).\n`;\n\nconst NOT_FOUND = `\n# Pattern not found\n\n> Pretty sure this is not the component you are looking for.\n\nWe looked everywhere and could not find a single thing.\n\nYou might want to navigate back to [Home](/) or use the search.\n\n---\n\nHelp us to make this message more helpful on [GitHub](https://github.com/patternplate/patternplate)\n`;\n\nconst selectDocs = createSelector(\n  selectItem,\n  items.selectType,\n  items.selectContents,\n  (pattern, type, contents) => {\n    if (pattern && pattern.type === 'folder') {\n      return contents;\n    }\n    if (type === \"not-found\") {\n      return NOT_FOUND;\n    }\n    return contents || DEFAULT_PATTERN_CONTENTS;\n  }\n);\n\nfunction mapState(state) {\n  return {\n    contents: state.demo.contents,\n    displayName: items.selectName(state),\n    docs: selectDocs(state),\n    error: state.demo.error,\n    loading: state.demo.fetching,\n    opacity: state.opacity,\n    src: demo.selectSrc(state),\n    type: items.selectType(state),\n    contentType: items.selectContentType(state),\n    updated: state.demo.updated,\n    navigationEnabled: state.navigationEnabled,\n    screenshot: state.routing.locationBeforeTransitions.query.screenshot === \"true\"\n  };\n}\n\nfunction mapDispatch(dispatch) {\n  return bindActionCreators(\n    {\n      onChange: actions.loadPatternDemo\n    },\n    dispatch\n  );\n}\n","import { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\n\nimport Search from \"../components/search\";\nimport * as actions from \"../actions\";\nimport * as found from \"../selectors/found\";\n\nfunction mapProps(state) {\n  return {\n    activeItem: found.selectActiveItem(state), // Used for highlight in list\n    base: state.base,\n    components: found.selectPatterns(state), // List of components matching state.components\n    docs: found.selectDocs(state), // List of docs matching state.search\n    enabled: state.searchEnabled, // If search is to be displayed\n    legend: found.selectLegend(state),\n    shortcuts: state.shortcuts, // Reference to global shortcuts for help texts\n    suggestion: found.selectSuggestion(state), // The backdrop search suggestion string\n    value: state.searchValue // The synchronous search input value\n  };\n}\n\nfunction mapDispatch(dispatch) {\n  return bindActionCreators(\n    {\n      onChange: e =>\n        actions.search({\n          persist: false,\n          perform: false,\n          value: e.target.value\n        }),\n      onClear: () =>\n        actions.search({ persist: true, perform: true, value: \"\" }),\n      onClick: () => actions.toggleSearch({ focus: true }),\n      onClickOutside: () => actions.toggleSearch({ focus: false }),\n      onClose: () => actions.toggleSearch({ focus: false }),\n      onComplete: value =>\n        actions.search({ persist: true, perform: true, value }),\n      onFocus: () => actions.toggleSearch({ focus: true }),\n      onMount: () => actions.toggleSearch({ sync: true }),\n      onNavigate: item => {\n        const pathname = `${item.contentType}/${item.id}`;\n        return actions.patchLocation({ pathname, query: { \"search-enabled\": false } })\n      },\n      onSubmit: e => {\n        e.preventDefault();\n        return actions.search({\n          persist: true,\n          perform: true,\n          value: e.target.search.value\n        });\n      },\n      onUp: () => actions.searchPreview(\"up\"),\n      onDown: () => actions.searchPreview(\"down\"),\n      onActivate: index => actions.searchPreview(index),\n      onStop: e =>\n        actions.search({ persist: true, perform: true, value: e.target.value })\n    },\n    dispatch\n  );\n}\n\nexport default connect(mapProps, mapDispatch)(Search);\n","import * as actions from \"../actions\";\nimport ToggleNavigation from \"../components/toggle-navigation\";\nimport withToggle from \"../connectors/with-toggle\";\n\nexport default withToggle(actions.toggleNavigation)(ToggleNavigation);\n","import * as actions from \"../actions\";\nimport Opacity from \"../components/toggle-opacity\";\nimport withToggle from \"../connectors/with-toggle\";\nimport withActiveForPattern from \"../connectors/with-active-for-pattern\";\nimport { skippable } from \"../behaviours\";\n\nconst OpacityToggle = withToggle(actions.toggleOpacity)(Opacity);\nexport default withActiveForPattern(skippable(OpacityToggle));\n","import * as actions from \"../actions\";\nimport SearchButton from \"../components/toggle-search\";\nimport withToggle from \"../connectors/with-toggle\";\n\nexport default withToggle(actions.toggleSearch)(SearchButton);\n","import querystring from \"querystring\";\nimport { connect } from \"react-redux\";\nimport Fullscreen from \"../components/trigger-fullscreen\";\nimport withActiveForPattern from \"../connectors/with-active-for-pattern\";\nimport withId from \"../connectors/with-id\";\nimport * as demo from \"../selectors/demo\";\nimport { skippable } from \"../behaviours\";\n\nconst SkippableFullscreen = withActiveForPattern(skippable(Fullscreen));\n\nconst mapProps = state => {\n  const q = querystring.stringify({\n    reload: state.isStatic ? null : true\n  });\n  return {\n    href: `${demo.selectSrc(state)}?${q}`\n  };\n};\n\nexport default connect(mapProps)(withId(SkippableFullscreen));\n","import { handleActions } from \"redux-actions\";\nimport markBlock from \"../actions/mark-block\";\n\nconst defaultValue = null;\n\nconst markBlockHandler = (state, { payload }) => {\n  const { active, id } = payload;\n\n  if (active) {\n    return id;\n  }\n\n  return defaultValue;\n};\n\nconst locationChangeHandler = () => {\n  return defaultValue;\n};\n\nexport default handleActions(\n  {\n    [markBlock]: markBlockHandler,\n    \"@@router/LOCATION_CHANGE\": locationChangeHandler\n  },\n  defaultValue\n);\n","import getIdByPathname from \"../utils/get-id-by-pathname\";\nimport { handleActions } from \"redux-actions\";\n\nfunction handler(_, { payload }) {\n  return payload.query[\"active-node\"];\n}\n\nexport default handleActions({\n  \"@@router/LOCATION_CHANGE\": handler\n});\n","import { handleAction } from \"redux-actions\";\nimport { getDepth } from \"./depth\";\n\nexport default (state) => {\n  return state;\n};\n","import * as actions from \"../actions\";\nimport toggle from \"./toggle\";\n\nexport default toggle(actions.toggleCode, { defaultValue: false });\n","import * as actions from \"../actions\";\nimport toggle from \"./toggle\";\n\nexport default toggle(actions.toggleComponentsEnabled, { defaultValue: false });\n","import {renderToString} from \"react-dom/server\";\nimport {merge} from \"lodash\";\nimport {svg} from \"@patternplate/components\";\n\nexport default (state, action) => {\n  let copy;\n\n  switch (action.type) {\n    case \"LOAD_SCHEMA_SUCCESS\": {\n      copy = merge({}, action.payload.config);\n      break;\n    }\n    default: {\n      copy = merge({}, state);\n    }\n  }\n\n  if (!copy.hasOwnProperty(\"ui\")) {\n    copy.ui = {};\n  }\n\n  const {ui} = copy;\n\n  ui.renderedLogo = ui.hasOwnProperty(\"logo\")\n    ? renderToString(svg.render(svg.sanitize(svg.purge([svg.parse(ui.logo)]))[0]))\n    : \"\";\n\n  const favicon = ui.favicon || ui.logo;\n\n  ui.renderedFavicon = global.document && favicon\n    ? svg.png(favicon)\n    : Promise.resolve(\"\");\n\n  return copy;\n};\n","import handleDependentActions from \"../actions/handle-dependent-actions\";\n\nexport default handleDependentActions(\n  {\n    LISTEN_HEARTBEAT: (...args) => handle(...args),\n    FETCHING: (...args) => handle(...args),\n    ERROR_HEARTBEAT: () => \"offline\"\n  },\n  {\n    defaultValue: \"\",\n    dependencies: [\"fetching\"]\n  }\n);\n\nfunction handle(state = \"loading\", action, { fetching }) {\n  return fetching ? \"loading\" : \"loaded\";\n}\n","const DEFAULT = {\n  error: null,\n  fetching: false,\n  id: null,\n  contents: null,\n  updated: null\n};\n\nexport default function demo(state = DEFAULT, action) {\n  switch (action.type) {\n    case \"LOAD_PATTERN_DEMO_START\":\n      return {\n        error: null,\n        fetching: true,\n        id: action.payload.id,\n        contents: state.contents,\n        updated: state.updated\n      };\n    case \"LOAD_PATTERN_DEMO_SUCCESS\": {\n      return {\n        error: null,\n        fetching: false,\n        id: action.payload.id,\n        contents: action.payload.contents,\n        updated: !action.payload.force && state.contents === action.payload.contents && state.id === action.payload.id\n          ? state.updated\n          : Date.now()\n      };\n    }\n    case \"LOAD_PATTERN_DEMO_ERROR\":\n      return {\n        error: true,\n        fetching: false,\n        id: action.payload.id,\n        contents: null,\n        updated: Date.now()\n      };\n    default:\n      return state;\n  }\n}\n","import * as actions from \"../actions\";\nimport toggle from \"./toggle\";\n\nexport default toggle(actions.toggleDependencies, { defaultValue: false });\n","import { handleActions } from \"redux-actions\";\n\nconst defaultValue = false;\n\nfunction onLocationChange(_, action) {\n  return action.payload.query[\"dependents-enabled\"] === \"true\";\n}\n\nexport default handleActions(\n  {\n    \"@@router/LOCATION_CHANGE\": onLocationChange\n  },\n  defaultValue\n);\n","import { handleAction } from \"redux-actions\";\n\nexport function getDepth(pathname) {\n  const fragments = pathname.split(\"/\").filter(Boolean);\n\n  const fragmentIndex = [\"pattern\", \"doc\"]\n    .map(known => fragments.indexOf(known))\n    .find(index => index !== -1);\n\n  const index = fragmentIndex === null ? fragments.length : fragmentIndex;\n  return fragments.slice(0, index).filter(Boolean).length;\n}\n\nexport default handleAction(\n  \"@@router/LOCATION_CHANGE\",\n  {\n    next(_, { payload: { pathname } }) {\n      return getDepth(pathname);\n    }\n  },\n  \".\"\n);\n","import * as actions from \"../actions\";\nimport toggle from \"./toggle\";\n\nexport default toggle(actions.toggleDoc, { defaultValue: false });\n","import { handlePromiseThunkAction } from \"../actions/promise-thunk-action\";\nimport { loadSchema } from \"../actions\";\n\nexport default handlePromiseThunkAction(\n  loadSchema,\n  {\n    start() {\n      return true;\n    },\n    success() {\n      return false;\n    },\n    error() {\n      return false;\n    }\n  },\n  {\n    defaultValue: false\n  }\n);\n","import * as actions from \"../actions\";\nimport toggle from \"./toggle\";\n\nexport default toggle(actions.toggleHide, { defaultValue: true });\n","import getIdByPathname from \"../utils/get-id-by-pathname\";\nimport handleDependentActions from \"../actions/handle-dependent-actions\";\n\nfunction handler(_, { payload }, { base }) {\n  return getIdByPathname(payload.pathname, base) || \"/\";\n}\n\nexport default handleDependentActions(\n  {\n    \"@@router/LOCATION_CHANGE\": handler\n  },\n  {\n    dependencies: [\"base\"]\n  }\n);\n","import activeBlock from \"./active-block\";\nimport activeNode from \"./active-node\";\nimport base from \"./base\";\nimport config from \"./config\";\nimport codeEnabled from \"./code-enabled\";\nimport connection from \"./connection\";\nimport depth from \"./depth\";\nimport demo from \"./demo\";\nimport dependenciesEnabled from \"./dependencies-enabled\";\nimport dependentsEnabled from \"./dependents-enabled\";\nimport docEnabled from \"./doc-enabled\";\nimport fetching from \"./fetching\";\nimport id from \"./id\";\nimport infoEnabled from \"./info-enabled\";\nimport isStatic from \"./is-static\";\nimport manifestEnabled from \"./manifest-enabled\";\nimport messages from \"./messages\";\nimport navigationEnabled from \"./navigation-enabled\";\nimport networkEnabled from \"./network-enabled\";\nimport opacity from \"./opacity\";\nimport componentsEnabled from \"./components-enabled\";\nimport search from \"./search\";\nimport searchEnabled from \"./search-enabled\";\nimport searchPreview from \"./search-preview\";\nimport searchValue from \"./search-value\";\nimport schema from \"./schema\";\nimport shortcuts from \"./shortcuts\";\nimport theme from \"./theme\";\nimport hideEnabled from \"./hide-enabled\";\nimport window from \"./window\";\n\nconst ident = state => state || {};\nconst getDependencies = (reducer = {}) => reducer.dependencies || [];\n\nexport default {\n  base,\n  config,\n  connection,\n  demo,\n  depth,\n  fetching,\n  hideEnabled,\n  id,\n  isStatic,\n  manifest: ident,\n  messages,\n  navigationEnabled,\n  opacity,\n  componentsEnabled,\n  schema,\n  search,\n  searchEnabled,\n  searchPreview,\n  searchValue,\n  shortcuts,\n  startBase: ident,\n  staticBase: ident,\n  theme,\n  window\n};\n\nexport const dependencies = {\n  connection: getDependencies(connection)\n};\n","import * as actions from \"../actions\";\nimport toggle from \"./toggle\";\n\nexport default toggle(actions.toggleInfo, { defaultValue: false });\n","export default (state = false) => state;\n","import * as actions from \"../actions\";\nimport toggle from \"./toggle\";\n\nexport default toggle(actions.toggleManifest, { defaultValue: false });\n","import { omit, merge } from \"lodash\";\n\nexport default (state = {}, action) => {\n  switch (action.type) {\n    case \"LOAD_PATTERN_DEMO_SUCCESS\":\n      if (action.payload.id in state) {\n        return omit(state, action.payload.id);\n      }\n      return state;\n    case \"LOAD_PATTERN_DEMO_ERROR\":\n      return merge({}, state, { [action.payload.id]: action.payload.error });\n    default:\n      return state;\n  }\n};\n","import * as actions from \"../actions\";\nimport toggle from \"./toggle\";\n\nexport default toggle(actions.toggleNavigation, { defaultValue: true });\n","import * as actions from \"../actions\";\nimport toggle from \"./toggle\";\n\nexport default toggle(actions.toggleNetwork, { defaultValue: null });\n","import * as actions from \"../actions\";\nimport toggle from \"./toggle\";\n\nexport default toggle(actions.toggleOpacity, { defaultValue: false });\n","import { loadSchema } from \"../actions\";\nimport { handlePromiseThunkAction } from \"../actions/promise-thunk-action\";\n\nexport default handlePromiseThunkAction(loadSchema, {\n  success(state, action) {\n    return action.payload;\n  }\n});\n","import * as actions from \"../actions\";\nimport toggle from \"./toggle\";\n\nexport default toggle(actions.toggleSearch, { defaultValue: false });\n","import { handleActions } from \"redux-actions\";\n\nconst defaultValue = 0;\n\nfunction onPreviewLocationChange(_, action) {\n  const index = Number(action.payload.query[\"search-preview\"]);\n  return isNaN(index) ? 0 : Math.max(0, index);\n}\n\nfunction onPerformSeach() {\n  return 0;\n}\n\nexport default handleActions(\n  {\n    \"@@router/LOCATION_CHANGE\": onPreviewLocationChange,\n    PERFORM_SEARCH: onPerformSeach\n  },\n  defaultValue\n);\n","import { handleActions } from \"redux-actions\";\n\nconst defaultValue = \"\";\n\nfunction onSetSearchLocationChange(_, action) {\n  return action.payload.query.search;\n}\n\nfunction onSetSearch(_, action) {\n  return action.payload;\n}\n\nfunction onPerformSearch(_, action) {\n  return action.payload;\n}\n\nexport default handleActions(\n  {\n    \"@@router/LOCATION_CHANGE\": onSetSearchLocationChange,\n    SET_SEARCH: onSetSearch,\n    PERFORM_SEARCH: onPerformSearch\n  },\n  defaultValue\n);\n","import { handleActions } from \"redux-actions\";\n\nconst defaultValue = \"\";\n\nfunction onSearchLocationChange(_, action) {\n  return action.payload.query.search;\n}\n\nfunction onPerformSeach(_, action) {\n  return action.payload;\n}\n\nexport default handleActions(\n  {\n    \"@@router/LOCATION_CHANGE\": onSearchLocationChange,\n    PERFORM_SEARCH: onPerformSeach\n  },\n  defaultValue\n);\n","export default state => state;\n","import { handleActions } from \"redux-actions\";\n\nconst defaultValue = \"light\";\n\nconst locationChangeHandler = (_, { payload }) => {\n  return payload.query.theme || defaultValue;\n};\n\nexport default handleActions(\n  {\n    \"@@router/LOCATION_CHANGE\": locationChangeHandler\n  },\n  defaultValue\n);\n","import assert from \"assert\";\nimport { handleActions } from \"redux-actions\";\n\nexport default (action, options = {}) => {\n  assert(\n    typeof action === \"function\",\n    `toggle needs an action to create a handler for, received ${action} of type ${typeof action}`\n  );\n\n  return handleActions(\n    {\n      \"@@router/LOCATION_CHANGE\": (_, { payload }) => {\n        if (!(action.key in payload.query)) {\n          return options.defaultValue;\n        }\n        return payload.query[action.key] === \"true\";\n      }\n    },\n    options.defaultValue\n  );\n};\n","import { isEqual } from \"lodash\";\nimport { handleActions } from \"redux-actions\";\nimport { windowResize } from \"../actions\";\n\nconst defaultValue = {\n  height: 0,\n  width: 0\n};\n\nexport default handleActions(\n  {\n    [windowResize]: onWindowResize\n  },\n  defaultValue\n);\n\nfunction onWindowResize(state, { payload }) {\n  const next = { width: payload.width, height: payload.height };\n  if (!isEqual(next, state)) {\n    return next;\n  }\n  return state;\n}\n","import React from \"react\";\nimport { Route, IndexRoute } from \"@marionebl/react-router\";\n\nimport Application from \"./containers/application\";\nimport Pattern from \"./containers/pattern\";\nimport Documentation from \"./containers/documentation\";\nimport NotFound from \"./containers/not-found\";\n\nexport default function(store) {\n  const state = store.getState();\n  return (\n    <Route path={state.base} component={Application}>\n      <IndexRoute component={Documentation} />\n      <Route path=\"pattern/*\" component={Pattern} />\n      <Route path=\"doc/*\" component={Documentation} />\n      <Route path=\"*\" component={NotFound} />\n    </Route>\n  );\n}\n","import { createSelector } from \"reselect\";\nimport selectItem from \"./item\";\n\nexport const selectSrc = createSelector(\n  selectItem,\n  state => state.base,\n  (item, base) => {\n    if (!item) {\n      return null;\n    }\n    if (item.contentType !== \"pattern\") {\n      return null;\n    }\n    return `${prefix(base)}/api/demo/${item.id}.html`;\n  }\n);\n\nfunction prefix(base) {\n  return base.charAt(base.length - 1) === \"/\"\n    ? base.slice(0, base.length - 1)\n    : base;\n}\n","import { createSearch } from \"@patternplate/search\";\nimport { merge } from \"lodash\";\nimport { createSelector } from \"reselect\";\nimport { flat as selectNavigation } from \"../selectors/navigation\";\nimport { enrich, flatten, sanitize } from \"./tree\";\n\nconst sd = createSelector(\n  state => state.schema.docs,\n  state => state.id,\n  state => state.hideEnabled,\n  state => state.routing.locationBeforeTransitions,\n  state => state.base,\n  () => () => [],\n  (tree, id, hide, location, base, search) => {\n    const context = { hide, id, prefix: \"doc\", location, base, search };\n    return flatten(sanitize(merge({}, tree), context)).filter(item => item.type !== \"folder\");\n  }\n);\n\nconst selectFlatPool = createSelector(\n  sd,\n  selectNavigation,\n  state => ({\n    hide: state.hideEnabled,\n    id: state.id,\n    location: state.routing.locationBeforeTransitions,\n    base: state.base,\n    prefix: \"doc\",\n    search: () => []\n  }),\n  (docs, nav, context) => {\n    return docs\n      .map(d => enrich(d, context))\n      .concat(nav)\n      .filter(item => Boolean(item.id) && Boolean(item.contentType))\n  });\n\nconst selectSubSearch = createSelector(\n  selectFlatPool,\n  flatPool => {\n    const search = createSearch(flatPool);\n    return term => {\n      const matches = search(term);\n      return matches.map(item => flatPool.find(p => p.id === item));\n    };\n  }\n);\n\nconst selectDocsTree = createSelector(\n  state => state.schema.docs,\n  state => state.id,\n  state => state.hideEnabled,\n  state => state.routing.locationBeforeTransitions,\n  state => state.base,\n  selectSubSearch,\n  (tree, id, hide, location, base, search) => {\n    const context = { hide, id, prefix: \"doc\", location, base, search };\n    return sanitize(merge({}, tree), context);\n  }\n);\n\nconst selectFirstItem = createSelector(\n  selectDocsTree,\n  (tree) => {\n    const list = flatten(tree);\n    return list ? list[0]: null;\n  }\n);\n\nconst selectQueries = createSelector(\n  selectDocsTree,\n  tree => flatten(tree)\n    .map(item => (item.manifest.options || {}).query)\n    .filter(Boolean)\n);\n\nconst selectQueried = createSelector(\n  selectDocsTree,\n  selectQueries,\n  (tree, queries) => {\n    const search = createSearch(flatten(tree));\n    return queries.reduce((acc, query) => {\n      return acc.concat(search(query).filter(r => acc.indexOf(r) === -1));\n    }, []);\n  }\n);\n\nconst selectDocs = createSelector(\n  selectDocsTree,\n  selectFirstItem,\n  selectQueried,\n  state => state.id,\n  (tree, first, queried, id) => {\n    tree.children = tree.children.filter(child => child.type === \"folder\" || queried.indexOf(child.id) === -1);\n\n    if (id === '/' && first) {\n      first.active = true;\n    }\n    return tree;\n  }\n);\n\nexport default selectDocs;\nexport const flat = createSelector(selectDocs, flatten);\n","import { createSearch, Query, Term } from \"@patternplate/search\";\nimport { flatten, uniq, uniqBy, sortBy } from \"lodash\";\nimport { createSelector } from \"reselect\";\nimport semver from \"semver\";\nimport {flat as selectPoolFlat} from \"./pool\";\n\nconst FLAGS = {\n  alpha: 0,\n  beta: 1,\n  rc: 2,\n  stable: 3,\n  deprecated: 4\n};\n\nconst FIELDS = [\n  /* {\n    type: \"field\",\n    key: \"depends\",\n    value: \"depends\",\n    description: \"patterns depending on id\",\n    operators: [\"=\", \"!=\", \"^=\", \"~=\"]\n  }, */\n  {\n    type: \"field\",\n    key: \"flag\",\n    value: \"flag\",\n    description: \"being flagged as [value]\",\n    operators: [\"=\", \"!=\", \">\", \">=\", \"<\", \"<=\", \"^=\", \"~=\"]\n  },\n  {\n    type: \"field\",\n    key: \"is\",\n    value: \"is\",\n    description: \"being of type [value]\",\n    operators: [\"=\", \"!=\"]\n  },\n  {\n    type: \"field\",\n    key: \"has\",\n    value: \"has\",\n    description: \"having data of [value]\",\n    operators: [\"=\", \"!=\"]\n  },\n  /* {\n    type: \"field\",\n    key: \"provides\",\n    value: \"provides\",\n    description: \"patterns providing for id\",\n    operators: [\"=\", \"!=\", \"^=\", \"~=\"]\n  }, */\n  {\n    type: \"field\",\n    key: \"tags\",\n    value: \"tags\",\n    description: \"having a tag of [value]\",\n    operators: [\"=\", \"!=\", \"^=\", \"~=\"]\n  },\n  {\n    type: \"field\",\n    key: \"version\",\n    value: \"version\",\n    description: \"having version of [value]\",\n    operators: [\"=\", \"!=\", \">\", \">=\", \"<\", \"<=\", \"^=\", \"~=\"]\n  }\n];\n\nconst OPERATORS = [\n  {\n    type: \"op\",\n    key: \"=\",\n    description: \"exact match\"\n  },\n  {\n    type: \"op\",\n    key: \"!=\",\n    description: \"negated match\"\n  },\n  {\n    type: \"op\",\n    key: \">\",\n    description: \"greater than\"\n  },\n  {\n    type: \"op\",\n    key: \">=\",\n    description: \"greater than or equal\"\n  },\n  {\n    type: \"op\",\n    key: \"<\",\n    description: \"lesser than\"\n  },\n  {\n    type: \"op\",\n    key: \"<=\",\n    description: \"lesser than or equal\"\n  },\n  {\n    type: \"op\",\n    key: \"^=\",\n    description: \"starts with\"\n  },\n  {\n    type: \"op\",\n    key: \"~=\",\n    description: \"contains\"\n  }\n];\n\nconst selectSearch = createSelector(\n  selectPoolFlat,\n  createSearch\n)\n\nconst selectMatches = createSelector(\n  selectSearch,\n  state => state.search,\n  (search, queryString) => {\n    if (typeof queryString !== \"string\" || queryString.length < 3) {\n      return [];\n    }\n    return search(queryString);\n  }\n);\n\nconst selectParsedValue = createSelector(\n  state => state.searchValue,\n  search => Query.parse(search)\n);\n\nconst selectLastQuery = createSelector(selectParsedValue, parsed =>\n  last(parsed)\n);\n\nfunction last(query) {\n  switch (query.type) {\n    case \"string\":\n      return query.value;\n    case \"and\":\n    case \"or\":\n    default: {\n      const q = query || {};\n      const values = q.values || [];\n      const cand = values[values.length - 1];\n      return cand ? last(cand) : \"\";\n    }\n  }\n}\n\nconst selectFields = createSelector(selectLastQuery, query =>\n  FIELDS.filter(f => f.value.startsWith(query))\n);\n\nconst selectFieldHit = createSelector(\n  state => state.searchValue,\n  selectLastQuery,\n  (value, query) => {\n    if (query.length === 0) {\n      return null;\n    }\n\n    return FIELDS.find(f => query.startsWith(f.value));\n  }\n);\n\nconst selectParsedQuery = createSelector(selectLastQuery, query =>\n  Term.parse(query)\n);\n\nconst selectOps = createSelector(\n  selectParsedQuery,\n  selectFieldHit,\n  (parsed, hit) => {\n    if (!hit) {\n      return [];\n    }\n    return hit.operators\n      .map(o => OPERATORS.find(op => op.key === o))\n      .filter(o => !parsed.operators || o.key.includes(parsed.operators))\n      .map(o => {\n        o.value = `${hit.value}${o.key}`;\n        return o;\n      });\n  }\n);\n\nconst selectOpsHit = createSelector(\n  selectParsedQuery,\n  selectOps,\n  (query, ops) => {\n    return ops.find(i => {\n      if (query.negated) {\n        return i.key === `!${query.operators}`;\n      }\n      return i.key === query.operators;\n    });\n  }\n);\n\nexport const selectFound = createSelector(\n  selectPoolFlat,\n  selectMatches,\n  (pool, matches) => {\n    const sorted = uniqBy(\n      sortBy(matches.map(match => pool.find(p => p.id === match)), \"contentType\"),\n      \"id\"\n    );\n    return sorted.map((s, i) => {\n      s.index = i;\n      return s;\n    });\n  }\n);\n\nexport const selectPatterns = createSelector(selectFound, found =>\n  found.filter(f => f.contentType === \"pattern\")\n);\n\nconst selectPatternPool = createSelector(selectPoolFlat, pool =>\n  pool.filter(f => f.contentType === \"pattern\")\n);\n\nconst selectOptions = createSelector(\n  selectPatternPool,\n  selectParsedQuery,\n  selectFieldHit,\n  selectOpsHit,\n  (patterns, parsed, field, op) => {\n    if (!field || !op) {\n      return [];\n    }\n\n    switch (field.key) {\n      case \"has\":\n        return [\n          {\n            type: \"quality\",\n            key: \"docs\",\n            value: [field.key, op.key, \"docs\"].join(\"\"),\n            description: \"colocated markdown\"\n          },\n          /* {\n            type: \"quality\",\n            key: \"dependencies\",\n            value: [field.key, op.key, \"dependencies\"].join(\"\"),\n            description: \"patterns with dependencies\"\n          },\n          {\n            type: \"quality\",\n            key: \"dependents\",\n            value: [field.key, op.key, \"dependents\"].join(\"\"),\n            description: \"patterns with dependents\"\n          }, */\n          {\n            type: \"quality\",\n            key: \"flag\",\n            value: [field.key, op.key, \"flag\"].join(\"\"),\n            description: \"flag specified\"\n          },\n          {\n            type: \"quality\",\n            key: \"version\",\n            value: [field.key, op.key, \"version\"].join(\"\"),\n            description: \"version specified\"\n          },\n          {\n            type: \"quality\",\n            key: \"description\",\n            value: [field.key, op.key, \"description\"].join(\"\"),\n            description: \"description provided\"\n          },\n          {\n            type: \"quality\",\n            key: \"displayName\",\n            value: [field.key, op.key, \"displayName\"].join(\"\"),\n            description: \"display name provided\"\n          },\n          {\n            type: \"quality\",\n            key: \"tags\",\n            value: [field.key, op.key, \"tags\"].join(\"\"),\n            description: \"tag attached\"\n          }\n        ];\n      case \"depends\":\n      case \"provides\":\n        return patterns\n          .filter(item => item.id.startsWith(parsed.value || \"\"))\n          .map(item => {\n            return {\n              type: \"pattern\",\n              key: item.id,\n              value: [field.key, op.key, item.id].join(\"\"),\n              description: `${item.id}`\n            };\n          });\n      case \"tags\":\n        return uniq(flatten(patterns.map(item => item.manifest.tags)))\n          .filter(Boolean)\n          .map(tag => {\n            return {\n              type: \"tag\",\n              key: tag,\n              value: [field.key, op.key, tag].join(\"\"),\n              description: tag\n            };\n          });\n      case \"version\": {\n        const versions = uniqBy(\n          patterns\n            .filter(item =>\n              item.manifest.version.startsWith(parsed.value || \"\")\n            )\n            .map(item => item.manifest.version)\n        )\n          .filter(version => semver.valid(version))\n          .sort((a, b) => (semver.gt(a, b) ? 1 : -1));\n\n        return versions.map(v => {\n          return {\n            type: \"version\",\n            key: v,\n            value: [field.key, op.key, v].join(\"\"),\n            description: `${v}`\n          };\n        });\n      }\n      case \"flag\": {\n        const flags = uniqBy(\n          patterns\n            .filter(item => item.manifest.flag.startsWith(parsed.value || \"\"))\n            .map(item => item.manifest.flag)\n        )\n          .filter(flag => typeof flag === \"string\")\n          .sort((a, b) => {\n            const delta = (FLAGS[a] || 0) - (FLAGS[b] || 0);\n            return delta === 0 ? a.localeCompare(b) : delta;\n          });\n\n        return flags.map(f => {\n          return {\n            type: \"flag\",\n            key: f,\n            value: [field.key, op.key, f].join(\"\"),\n            description: `${f}`\n          };\n        });\n      }\n      case \"is\":\n        return [\n          {\n            type: \"is\",\n            key: \"pattern\",\n            value: [field.key, op.key, \"pattern\"].join(\"\"),\n            description: \"is a pattern\"\n          },\n          {\n            type: \"is\",\n            key: \"doc\",\n            value: [field.key, op.key, \"doc\"].join(\"\"),\n            description: \"is a doc\"\n          }\n        ];\n      default:\n        return [];\n    }\n  }\n);\n\nconst selectOptionsHit = createSelector(\n  selectParsedQuery,\n  selectOptions,\n  (query, ops) => ops.some(o => o.value === query.raw)\n);\n\nexport const selectLegend = createSelector(\n  selectParsedValue,\n  selectParsedQuery,\n  selectFields,\n  selectFieldHit,\n  selectOps,\n  selectOpsHit,\n  selectOptions,\n  selectOptionsHit,\n  (parsedValue, parsed, fields, fieldHit, ops, opsHit, options, optionsHit) => {\n    if (!fieldHit) {\n      return {\n        name: \"Fields\",\n        items: fields\n      };\n    }\n\n    if (!opsHit && !parsed.value) {\n      return {\n        name: \"Operators\",\n        items: ops\n      };\n    }\n\n    if (!optionsHit && fieldHit && opsHit) {\n      return {\n        name: fieldHit.key,\n        items: options\n      };\n    }\n\n    return {\n      name: \"\",\n      items: []\n    };\n  }\n);\n\nexport const selectDocs = createSelector(selectFound, found =>\n  found.filter(f => f.contentType === \"doc\")\n);\n\nexport const selectSuggestion = createSelector(\n  state => state.searchValue,\n  selectPoolFlat,\n  selectLegend,\n  (search, pool, legend) => {\n    if (typeof search !== \"string\" || search.length === 0) {\n      return \"\";\n    }\n\n    const match = pool.find(m =>\n      [m.id, m.name, (m.manifest || {}).displayName].some(\n        k => k && k.startsWith(search)\n      )\n    );\n\n    if (match) {\n      return (\n        [match.id, match.name, match.manifest.displayName].find(\n          k => k && k.startsWith(search)\n        ) || \"\"\n      );\n    }\n\n    const lmatch = (legend.items || []).find(i => i.value.startsWith(search));\n    return lmatch ? lmatch.value : null;\n  }\n);\n\nexport const selectActiveItem = createSelector(\n  state => state,\n  selectFound,\n  state => state.searchPreview,\n  (state, found, preview) => {\n    const index = Math.min(preview, found.length - 1);\n    const item = found[index];\n    return item\n      ? Object.assign({}, item, {\n          index,\n          dependents: [],// rel(\"dependents\"),\n          dependencies: [] // rel(\"dependencies\")\n        })\n      : item;\n  }\n);\n","import { createSelector } from \"reselect\";\nimport { flat as selectDocs } from \"./docs\";\nimport { flat as selectPool } from \"./pool\";\nimport createRelationSelector from \"./relation\";\n\nconst selectVirtual = createSelector(\n  selectDocs,\n  docs => {\n    return docs.filter(d => {\n      const {manifest} = d;\n      const {options = {}} = manifest;\n      const {query = \"\"} = options;\n      return Boolean(query);\n    });\n  }\n);\n\nconst selectItem = createSelector(\n  selectPool,\n  state => state.id,\n  (pool, id) => {\n    const item = pool.find(item => id === `${item.contentType}/${item.id}`);\n\n    if (item) {\n      return item;\n    }\n\n    if (id === '/') {\n      return pool[0];\n    }\n  }\n);\n\nexport default selectItem;\n\nconst filter = hidden => {\n  return hidden\n    ? item => (item.manifest.options || {}).hidden !== true\n    : i => i;\n};\n\nconst selectFilter = createSelector(state => state.hide, hide => filter(hide));\n\nconst relation = key => createRelationSelector(key, selectItem, selectFilter);\n\nexport const selectDependencies = relation(\"dependencies\");\nexport const selectDependents = relation(\"dependents\");\n\nexport const selectManifest = createSelector(\n  selectItem,\n  item => (item ? JSON.stringify(item.manifest, null, \"  \") : \"\")\n);\n\nexport const selectContentType = createSelector(\n  selectItem,\n  item => (item ? item.contentType : \"\")\n);\n\nexport const selectType = createSelector(\n  selectItem,\n  item => (item ? item.type : \"\")\n);\n\nexport const selectActive = createSelector(\n  selectItem,\n  state => state.searchEnabled,\n  (item, search) => !search && item !== null && typeof item !== \"undefined\"\n);\n\nexport const selectIcon = createSelector(\n  selectItem,\n  item => (item ? item.manifest.icon || item.type : \"\")\n);\n\nexport const selectName = createSelector(\n  selectItem,\n  item => (item ? item.manifest.displayName : \"\")\n);\n\nexport const selectTags = createSelector(\n  selectItem,\n  item => (item ? item.manifest.tags || [] : [])\n);\n\nexport const selectVersion = createSelector(\n  selectItem,\n  item => (item ? item.manifest.version : \"\")\n);\n\nexport const selectFlag = createSelector(\n  selectItem,\n  item => (item ? item.manifest.flag : \"\")\n);\n\nexport const selectId = createSelector(\n  selectItem,\n  item => (item ? item.id : \"\")\n);\n\nexport const selectContents = createSelector(selectItem, item => {\n  if (!item) {\n    return null;\n  }\n  return typeof item.contents === \"string\" ? item.contents : null;\n});\n\nexport const selectDescription = createSelector(\n  selectItem,\n  item => (item ? item.manifest.description : \"\")\n);\n","import { merge } from \"lodash\";\nimport { createSelector } from \"reselect\";\nimport { flatten, sanitize } from \"./tree\";\n\nconst navigation = createSelector(\n  state => state.schema.meta,\n  state => state.id,\n  state => state.hideEnabled,\n  state => state.routing.locationBeforeTransitions,\n  state => state.base,\n  (tree, id, hide, location, base) => {\n    const context = { base, hide, id, prefix: \"pattern\", location };\n    return sanitize(merge({}, tree), context);\n  }\n);\n\nexport default navigation;\n\nexport const flat = createSelector(navigation, flatten);\n","import { createSearch } from \"@patternplate/search\";\nimport { createSelector } from \"reselect\";\nimport { flat as selectDocs } from \"../selectors/docs\";\nimport { flat as selectNavigation } from \"../selectors/navigation\";\nimport { enrich } from \"../selectors/tree\";\n\nexport const selectFlatPool = createSelector(\n  selectDocs,\n  selectNavigation,\n  state => ({\n    hide: state.hideEnabled,\n    id: state.id,\n    location: state.routing.locationBeforeTransitions,\n    base: state.base,\n    prefix: \"doc\",\n    search: () => []\n  }),\n  (docs, nav, context) => {\n    const enriched = flatten(docs.map(d => {\n      return enrich(d, context);\n    }));\n    return enriched\n      .concat(nav)\n      .filter(item => Boolean(item.id) && Boolean(item.contentType))\n  });\n\nconst selectSearch = createSelector(\n  selectFlatPool,\n  flatPool => {\n    const search = () => [];\n    return term => {\n      const matches = search(term);\n      return matches.map(item => flatPool.find(p => p.id === item));\n    };\n  }\n);\n\nconst selectPool = createSelector(\n  selectDocs,\n  selectNavigation,\n  state => ({\n    hide: state.hideEnabled,\n    id: state.id,\n    location: state.routing.locationBeforeTransitions,\n    base: state.base,\n    prefix: \"doc\",\n    search: selectSearch(state)\n  }),\n  (docs, nav, context) => {\n    const enriched = flatten(docs.map(d => {\n      return enrich(d, context);\n    }));\n    return enriched\n      .concat(nav)\n      .filter(item => Boolean(item.id) && Boolean(item.contentType))\n  });\n\nfunction flatten(tree, initial = []) {\n  return tree.reduce((acc, item) => {\n    acc.push(item);\n    if (Array.isArray(item.children)) {\n      flatten(item.children, acc);\n    }\n    return acc;\n  }, initial);\n}\n\nexport default selectPool;\nexport const flat = createSelector(\n  selectDocs,\n  selectNavigation,\n  (docs, nav) => flatten(docs.concat(nav)).filter(item => item.type === \"item\")\n);\n","import { createSelector } from \"reselect\";\nimport selectPatterns from \"./navigation\";\nimport find from \"../utils/find\";\n\nexport default function createRelationSelector(key, selectItem) {\n  return createSelector(selectPatterns, selectItem, (patterns, item) => {\n    if (!item) {\n      return [];\n    }\n    return (item[key] || [])\n      .map(id => find(patterns, `pattern/${id}`, { type: \"pattern\" }))\n      .filter(Boolean);\n  });\n}\n","import path from \"path\";\nimport querystring from \"querystring\";\nimport url from \"url\";\nimport { merge } from \"lodash\";\n\nconst WEIGHTS = {\n  folder: 0,\n  doc: 1,\n  pattern: 2\n};\n\nexport function flatten(tree) {\n  return tree.children;\n}\n\nexport function sanitize(tree, context) {\n  const { id, config = {}, prefix, base, location, search } = context;\n\n  tree.children = tree.children\n    .map(child => {\n      const enriched = enrich(child, {\n        base,\n        location,\n        id,\n        config,\n        prefix,\n        search,\n      });\n      return enriched.children\n        ? sanitize(enriched, context)\n        : enriched;\n    })\n    .sort((a, b) => {\n      const order =\n        ((((a.manifest || {}).options || {}).order || 0) - (((b.manifest || {}).options || {}).order || 0));\n      const weight = (WEIGHTS[a.type] || 0) - (WEIGHTS[b.type] || 0);\n      const comp = a.manifest.displayName.localeCompare(b.manifest.displayName);\n\n      if (order !== 0) {\n        return order;\n      }\n\n      if (weight !== 0) {\n        return weight;\n      }\n\n      return comp;\n    });\n\n  return enrich(tree, { base, location, id, config, prefix, search });\n}\n\nexport function enrich(child, context) {\n  const { id, prefix, search } = context;\n  const childid = [child.contentType, child.id].join('/');\n  child.active = (childid === id) || `doc/${context.parent}/${childid}` === id;\n  const parsed = url.parse(child.href || path.join(prefix, child.id || child.path));\n\n  const q =\n    typeof parsed.query === \"string\"\n      ? querystring.parse(parsed.query)\n      : parsed.query;\n\n  child.href = url.format({\n    pathname: pre(context.base || '', parsed.pathname || ''),\n    query: Object.assign({}, context.location.query, q)\n  });\n\n  child.warnings = child.warnings || [];\n  child.type = child.contentType === \"doc\" && typeof ((child.manifest).options || {}).query === \"string\"\n    ? \"folder\"\n    : \"item\";\n\n  if (child.type === \"folder\") {\n    child.children = search(child.manifest.options.query)\n      .filter(item => item.id !== child.id);\n  }\n\n  if (\n    child.manifest &&\n    child.type === \"pattern\" &&\n    (child.manifest.flag === \"alpha\" || child.manifest.flag === \"deprecated\")\n  ) {\n    child.warnings.push({\n      type: \"flag\",\n      value: child.manifest.flag,\n      message: `${child.manifest.displayName} is flagged as ${child.manifest\n        .flag}.`\n    });\n  }\n\n  return child;\n}\n\nfunction pre(base, pathname) {\n  const b = norm(base);\n  const p = norm(pathname);\n\n  if (p.startsWith(b)) {\n    return `/${p}`;\n  }\n\n  return `/${[norm(base), norm(pathname)].join(\"/\")}`;\n}\n\nfunction norm(p) {\n  return p.split(\"/\").filter(Boolean).join(\"/\");\n}\n","import * as actions from \"./actions\";\nimport Shortcut from \"./utils/shortcut\";\n\nexport default createShortcuts;\n\nfunction createShortcuts() {\n  const bind = store => {\n    Object.keys(bind).forEach(name => {\n      bind[name].bind(store);\n    });\n  };\n\n  bind.toggleConsole = new Shortcut({\n    character: \"c\",\n    description: props => `${props.enabled ? \"Hide\" : \"Show\"} console`,\n    action: actions.toggleConsole\n  });\n\n  bind.toggleDoc = new Shortcut({\n    character: \"d\",\n    description: () => `Open documentation for this pattern`,\n    action: actions.toggleDoc\n  });\n\n  bind.openDocumentation = new Shortcut({\n    character: \"7\",\n    description: () => `Navigate back to / route`,\n    action: actions.openDocumentation\n  });\n\n  bind.openFullscreen = new Shortcut({\n    character: \"f\",\n    description: () => `Open fullscreen view`,\n    action: actions.openFullscreen\n  });\n\n  bind.toggleHide = new Shortcut({\n    character: \"h\",\n    description: props => `${props.enabled ? \"Show\" : \"Hide\"} hidden items`,\n    action: actions.toggleHide\n  });\n\n  bind.info = new Shortcut({\n    character: \"i\",\n    description: props => `${props.enabled ? \"Hide\" : \"Show\"} pattern infos`,\n    action: actions.toggleInfo\n  });\n\n  bind.toggleOpacity = new Shortcut({\n    character: \"o\",\n    description: props =>\n      `${props.enabled ? \"Hide\" : \"Show\"} opacity indicators`,\n    action: actions.toggleOpacity\n  });\n\n  bind.toggleShortcuts = new Shortcut({\n    character: \"k\",\n    description: props =>\n      `${props.enabled ? \"Hide\" : \"Show\"} keyboard shortcuts`,\n    action: actions.toggleKeyboardShortcuts\n  });\n\n  bind.toggleRulers = new Shortcut({\n    character: \"l\",\n    description: props => `${props.enabled ? \"Hide\" : \"Show\"} rulers`,\n    action: actions.toggleRulers\n  });\n\n  bind.toggleCode = new Shortcut({\n    character: \"m\",\n    description: props => `${props.enabled ? \"Hide\" : \"Show\"} pattern code`,\n    action: actions.toggleCode\n  });\n\n  bind.toggleNavigation = new Shortcut({\n    character: \"n\",\n    description: props => `${props.enabled ? \"Hide\" : \"Show\"} navigation`,\n    action: actions.toggleNavigation\n  });\n\n  bind.toggleNetwork = new Shortcut({\n    character: \"d\",\n    description: props =>\n      `${props.enabled ? \"Hide\" : \"Show\"} dependency network`,\n    action: actions.toggleNetwork\n  });\n\n  const reload = () => actions.reload({ reloadTime: Date.now() });\n  reload.type = actions.reload.type;\n  reload.key = actions.reload.key;\n  reload.property = actions.reload.property;\n\n  bind.reload = new Shortcut({\n    character: \"r\",\n    description: () => `Force sync`,\n    action: reload\n  });\n\n  bind.toggleSearch = new Shortcut({\n    character: \"space\",\n    description: props => `${props.enabled ? \"Disable\" : \"Enable\"} search`,\n    action: actions.toggleSearch\n  });\n\n  bind.toggleTheme = new Shortcut({\n    character: \"t\",\n    description: \"Toggle active theme\",\n    action: actions.toggleTheme\n  });\n\n  bind.close = new Shortcut({\n    character: \"esc\",\n    modifiers: [],\n    action: actions.closeAllTheThings\n  });\n\n  bind.up = new Shortcut({\n    character: \"arrow-up\",\n    action: () => actions.arrow(\"up\")\n  });\n\n  bind.right = new Shortcut({\n    character: \"arrow-right\",\n    action: () => actions.arrow(\"right\")\n  });\n\n  bind.down = new Shortcut({\n    character: \"arrow-down\",\n    action: () => actions.arrow(\"down\")\n  });\n\n  bind.left = new Shortcut({\n    character: \"arrow-left\",\n    action: () => actions.arrow(\"left\")\n  });\n\n  return bind;\n}\n","import { createStore, compose, applyMiddleware } from \"redux\";\nimport { routerReducer as routing, routerMiddleware } from \"react-router-redux\";\nimport thunk from \"redux-thunk\";\nimport topology from \"topologically-combine-reducers\";\n\nimport * as actions from \"./actions\";\nimport createShortcuts from \"./shortcuts\";\nimport reducers, { dependencies } from \"./reducers\";\n\nexport default function configureStore(history, initial) {\n  const reducer = hydrateable(topology({ routing, ...reducers }, dependencies));\n  const enhance = global.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\n  const middlewares = [thunk, routerMiddleware(history)];\n\n  const middleware = applyMiddleware(...middlewares);\n  const shortcuts = createShortcuts();\n  const store = createStore(\n    reducer,\n    { ...initial, shortcuts },\n    enhance(middleware)\n  );\n\n  listen(store, { url: \"/api\" });\n  shortcuts(store);\n\n  return store;\n}\n\nfunction hydrateable(reducer) {\n  return (state, action) => {\n    switch (action.type) {\n      case \"@@APPLY_STATE\":\n        return reducer(action.payload, action);\n      default:\n        return reducer(state, action);\n    }\n  };\n}\n\nfunction listen(store, options) {\n  store.dispatch(actions.listen({ url: options.url }));\n}\n","import \"isomorphic-fetch\";\nimport { merge } from \"lodash\";\n\nexport default fetch;\n\nconst defaultHeaders = {\n  headers: { accept: \"application/json\" },\n  credentials: \"include\"\n};\n\nfunction fetch(uri, userHeaders) {\n  const headers =\n    userHeaders === false ? defaultHeaders : merge({}, userHeaders, defaultHeaders);\n\n  return global.fetch(uri, headers);\n}\n","export default find;\n\nfunction find(tree, id, { type }) {\n  if (id === \"/\") {\n    return tree;\n  }\n\n  if (!id || !id.startsWith(`${type}/`)) {\n    return null;\n  }\n\n  const reg = new RegExp(`^${type}/`);\n\n  const frags = id\n    .replace(reg, \"\")\n    .split(\"/\")\n    .filter(Boolean);\n\n  const match = tree.children.find(\n    child =>\n      child.path.every((s, i) => frags[i] === s) &&\n      (child.type === type || child.type === \"folder\")\n  );\n\n  return match;\n}\n","import path from \"path\";\nimport urlQuery from \"./url-query\";\n\nexport default function getIdByPathname(pathname, base = \"/\") {\n  const parsed = urlQuery.parse(pathname);\n  return (path.posix || path).relative(base, parsed.pathname);\n}\n","import ARSON from \"arson\";\nimport assert from \"assert\";\n\nconst CODES = {\n  \"arrow-up\": 38,\n  \"arrow-right\": 39,\n  \"arrow-down\": 40,\n  \"arrow-left\": 37,\n  esc: 27,\n  space: 32,\n  c: 67,\n  d: 68,\n  e: 69,\n  f: 70,\n  h: 72,\n  i: 73,\n  o: 79,\n  k: 75,\n  l: 76,\n  m: 77,\n  n: 78,\n  r: 82,\n  t: 84\n};\n\nexport default class Shortcut {\n  constructor({ action, character, description, modifiers }) {\n    this.character = character;\n    this.code = CODES[character];\n    this.action = action;\n    this.key = this.action.key;\n    this.active = \"document\" in global;\n    this.description = description;\n    this.modifiers = modifiers || [\"ctrlKey\", \"altKey\"];\n    this.bind = this.bind.bind(this);\n  }\n\n  bind(store) {\n    if (!this.active) {\n      return;\n    }\n\n    const onKeyPress = e => {\n      if (!this.modifiers.every(m => e[m])) {\n        return;\n      }\n\n      if (e.keyCode !== this.code) {\n        return false;\n      }\n\n      store.dispatch(this.action());\n    };\n\n    global.addEventListener(\"message\", e => {\n      try {\n        const message = ARSON.parse(e.data);\n        if (message.type === \"keydown\") {\n          onKeyPress(message.payload);\n        }\n      } catch (err) {\n\n      }\n    }, false);\n\n    global.addEventListener(\"keydown\", e => {\n      const prevent = onKeyPress({\n        altKey: e.altKey,\n        ctrlKey: e.ctrlKey,\n        keyCode: (e.data || e).keyCode,\n      });\n      if (prevent) {\n        e.preventDefault();\n      }\n    });\n  }\n\n  toString() {\n    const keys = [...this.modifiers, this.character].map(c =>\n      c.replace(\"Key\", \"\")\n    );\n    return `[${keys.join(\"+\")}]`;\n  }\n}\n","import path from \"path\";\nimport url from \"url\";\nimport { entries, includes } from \"lodash\";\n\nfunction has(token) {\n  return item => includes(item, token);\n}\n\nfunction div(token) {\n  return item => item.split(token).slice(0, 2);\n}\n\nfunction not(fn) {\n  return (...args) => !fn(...args);\n}\n\nfunction shove(input) {\n  const index = input.length - 1;\n  if (input[index] === \"/\") {\n    return input.slice(0, index);\n  }\n  return input;\n}\n\nexport function format(parsed = {}) {\n  const query = entries(parsed.query || {}).reduce(\n    (result, entry) => [...result, entry.join(\"--\")],\n    []\n  );\n\n  const extension = path.extname(parsed.pathname || \"\");\n\n  const before = extension\n    ? path.dirname(parsed.pathname)\n    : shove(parsed.pathname);\n  const after = extension ? path.basename(parsed.pathname) : \"\";\n\n  return [before, ...query, after].filter(Boolean).join(\"/\");\n}\n\nexport function parse(urlPath = \"\") {\n  const parsed = url.parse(urlPath);\n  const raw = parsed.pathname || \"\";\n\n  const pathname = raw\n    .split(\"/\")\n    .filter(not(has(\"--\")))\n    .join(\"/\");\n\n  const query = raw\n    .split(\"/\")\n    .filter(has(\"--\"))\n    .map(div(\"--\"))\n    .reduce((registry, entry) => {\n      const [key, value] = entry;\n      registry[key] = value;\n      return registry;\n    }, {});\n\n  return {\n    pathname,\n    query\n  };\n}\n\nexport default { parse, format };\n","const ARSON = require(\"arson\");\nconst url = require(\"url\");\nconst fetch = require(\"isomorphic-fetch\");\nconst platform = require(\"platform\");\nconst router = require(\"./app/client\").default;\nconst { merge } = require(\"lodash\");\n\nconst { document } = global;\n\nmain().catch(err => {\n  console.error(err);\n});\n\nasync function main() {\n  const slot = document.querySelector('[data-application-el=\"patternplate\"]');\n  const vault = document.querySelector('[data-application-state=\"patternplate\"]');\n  const data = await getData(vault);\n\n  if (data.isStatic) {\n    slot.innerHTML = '';\n  }\n\n  router(data, slot);\n\n  document.body.setAttribute(\"data-mounted\", true);\n}\n\nasync function getData(vault) {\n  const data = ARSON.parse(decodeURIComponent(vault.textContent));\n  const schema = await getStateData(data.base);\n\n  return merge(data, getPlatformData(), getWindowData(), {\n    schema,\n    navigation: schema.meta\n  });\n}\n\nasync function getStateData(base) {\n  return (await fetch(`${prefix(base)}/api/state.json`, {credentials: \"include\"})).json();\n}\n\nfunction prefix(base) {\n  return base.charAt(base.length - 1) === \"/\"\n    ? base.slice(0, base.length - 1)\n    : base;\n}\n\nfunction getPlatformData() {\n  return {\n    clientRuntimeName: platform.name,\n    clientRuntimeVersion: platform.version,\n    clientOsName: platform.os.name,\n    clientOsVersion: platform.os.version\n  };\n}\n\nfunction getWindowData() {\n  return {\n    window: {\n      width: global.innerWidth,\n      height: global.innerHeight\n    }\n  };\n}\n"],"sourceRoot":""}